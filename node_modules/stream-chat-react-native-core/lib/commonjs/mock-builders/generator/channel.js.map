{"version":3,"names":["_uuid","require","_user","_excluded","defaultCapabilities","defaultConfig","automod","automod_behavior","commands","args","description","name","set","connect_events","created_at","max_message_length","message_retention","mutes","reactions","read_events","replies","search","typing_events","updated_at","uploads","url_enrichment","defaultState","members","messages","setIsUpToDate","jest","fn","getChannelDefaults","_ref","arguments","length","undefined","id","uuidv4","type","_client","data","cid","config","_extends3","created_by","getUserDefaults","frozen","own_capabilities","state","generateChannel","customValues","Object","keys","reduce","accumulated","current","key","_typeof2","_defineProperty2","exports","generateChannelResponse","channel","_customValues$id","_customValues$message","_customValues$type","_customValues$channel","rest","_objectWithoutProperties2","defaults","user","generateUser"],"sources":["channel.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { generateUser, getUserDefaults } from './user';\n\nconst defaultCapabilities = [\n  'ban-channel-members',\n  'delete-any-message',\n  'delete-own-message',\n  'flag-message',\n  'mute-channel',\n  'pin-message',\n  'quote-message',\n  'read-events',\n  'send-links',\n  'send-message',\n  'send-reaction',\n  'send-reply',\n  'typing-events',\n  'update-any-message',\n  'update-own-message',\n  'upload-file',\n];\n\nconst defaultConfig = {\n  automod: 'disabled',\n  automod_behavior: 'flag',\n  commands: [\n    {\n      args: '[text]',\n      description: 'Post a random gif to the channel',\n      name: 'giphy',\n      set: 'fun_set',\n    },\n  ],\n  connect_events: true,\n  created_at: '2020-04-24T11:36:43.859020368Z',\n  max_message_length: 5000,\n  message_retention: 'infinite',\n  mutes: true,\n  name: 'messaging',\n  reactions: true,\n  read_events: true,\n  replies: true,\n  search: true,\n  typing_events: true,\n  updated_at: '2020-04-24T11:36:43.859022903Z',\n  uploads: true,\n  url_enrichment: true,\n};\nconst defaultState = {\n  members: {},\n  messages: [],\n  setIsUpToDate: jest.fn(),\n};\n\nconst getChannelDefaults = (\n  { id, type }: { [key: string]: any } = { id: uuidv4(), type: 'messaging' },\n) => ({\n  _client: {},\n  data: {\n    cid: `${type}:${id}`,\n    config: {\n      ...defaultConfig,\n      name: type,\n      type,\n    },\n    created_at: '2020-04-28T11:20:48.578147Z',\n    created_by: getUserDefaults(),\n    frozen: false,\n    id,\n    own_capabilities: defaultCapabilities,\n    type,\n    updated_at: '2020-04-28T11:20:48.578147Z',\n  },\n  id,\n  state: defaultState,\n  type,\n});\n\nexport const generateChannel = (customValues: { [key: string]: any }) =>\n  Object.keys(customValues).reduce((accumulated, current) => {\n    if (current in accumulated) {\n      const key = current as keyof typeof accumulated;\n      accumulated[key] =\n        typeof accumulated[key] === 'object'\n          ? { ...accumulated[key], ...customValues[key] }\n          : (accumulated[key] = customValues[key]);\n      return accumulated;\n    }\n    return { ...accumulated, [current]: customValues[current] };\n  }, getChannelDefaults());\n\nexport const generateChannelResponse = (\n  customValues: {\n    channel?: Record<string, any>;\n    id?: string;\n    messages?: Record<string, any>[];\n    type?: string;\n  } = { channel: {}, id: uuidv4(), messages: [], type: 'messaging' },\n) => {\n  const { id = uuidv4(), messages = [], type = 'messaging', channel = {}, ...rest } = customValues;\n\n  const defaults = getChannelDefaults();\n  return {\n    channel: {\n      ...defaults.data,\n      ...{\n        cid: `${type}:${id}`,\n        ...channel,\n        id,\n        type,\n        user: generateUser(),\n      },\n    },\n    members: [],\n    messages,\n    ...rest,\n  };\n};\n"],"mappings":"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"}