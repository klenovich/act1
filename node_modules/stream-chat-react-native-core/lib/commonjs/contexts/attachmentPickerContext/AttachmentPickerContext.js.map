{"version":3,"names":["_react","_interopRequireWildcard","require","_defaultBaseContextValue","_getDisplayName","_isTestEnvironment","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","AttachmentPickerContext","React","createContext","DEFAULT_BASE_CONTEXT_VALUE","exports","AttachmentPickerProvider","_ref","_value$topInset","children","value","bottomInsetValue","bottomInset","topInsetValue","topInset","_useState","useState","_useState2","_slicedToArray2","setBottomInset","_useState3","_useState4","maxNumberOfFiles","setMaxNumberOfFiles","_useState5","_useState6","selectedImages","setSelectedImages","_useState7","_useState8","selectedFiles","setSelectedFiles","_useState9","_useState10","selectedPicker","setSelectedPicker","_useState11","_useState12","setTopInset","useEffect","combinedValue","_extends2","createElement","Provider","__self","__source","fileName","lineNumber","columnNumber","useAttachmentPickerContext","contextValue","useContext","isTestEnvironment","Error","withAttachmentPickerContext","Component","WithAttachmentPickerContextComponent","props","attachmentPickerContext","displayName","getDisplayName"],"sources":["AttachmentPickerContext.tsx"],"sourcesContent":["import React, { PropsWithChildren, useContext, useEffect, useState } from 'react';\n\nimport type { Asset, DefaultStreamChatGenerics, File } from '../../types/types';\nimport { DEFAULT_BASE_CONTEXT_VALUE } from '../utils/defaultBaseContextValue';\n\nimport { getDisplayName } from '../utils/getDisplayName';\nimport { isTestEnvironment } from '../utils/isTestEnvironment';\n\nexport type AttachmentPickerIconProps = {\n  numberOfImageUploads: number;\n  selectedPicker?: 'images';\n};\n\nexport type AttachmentPickerContextValue = {\n  /**\n   * `bottomInset` determine the height of the `AttachmentPicker` and the underlying shift to the `MessageList` when it is opened.\n   * This can also be set via the `setBottomInset` function provided by the `useAttachmentPickerContext` hook.\n   *\n   * Please check [OverlayProvider](https://github.com/GetStream/stream-chat-react-native/wiki/Cookbook-v3.0#overlayprovider) section in Cookbook\n   * for more details.\n   */\n  bottomInset: number;\n  /**\n   * Custom UI component for [camera selector icon](https://github.com/GetStream/stream-chat-react-native/blob/main/screenshots/docs/1.png)\n   *\n   * **Default: ** [CameraSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/main/package/src/components/AttachmentPicker/components/CameraSelectorIcon.tsx)\n   */\n  CameraSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  closePicker: () => void;\n  /**\n   * Custom UI component for [file selector icon](https://github.com/GetStream/stream-chat-react-native/blob/main/screenshots/docs/1.png)\n   *\n   * **Default: ** [FileSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/main/package/src/components/AttachmentPicker/components/FileSelectorIcon.tsx)\n   */\n  FileSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  /**\n   * Custom UI component for [image selector icon](https://github.com/GetStream/stream-chat-react-native/blob/main/screenshots/docs/1.png)\n   *\n   * **Default: ** [ImageSelectorIcon](https://github.com/GetStream/stream-chat-react-native/blob/main/package/src/components/AttachmentPicker/components/ImageSelectorIcon.tsx)\n   */\n  ImageSelectorIcon: React.ComponentType<AttachmentPickerIconProps>;\n  /**\n   * Limit for maximum files that can be attached per message.\n   */\n  maxNumberOfFiles: number;\n  openPicker: () => void;\n  selectedFiles: File[];\n  selectedImages: Asset[];\n  setBottomInset: React.Dispatch<React.SetStateAction<number>>;\n  setMaxNumberOfFiles: React.Dispatch<React.SetStateAction<number>>;\n  setSelectedFiles: React.Dispatch<React.SetStateAction<File[]>>;\n  setSelectedImages: React.Dispatch<React.SetStateAction<Asset[]>>;\n  setSelectedPicker: React.Dispatch<React.SetStateAction<'images' | undefined>>;\n  setTopInset: React.Dispatch<React.SetStateAction<number>>;\n  topInset: number;\n  attachmentPickerBottomSheetHeight?: number;\n  attachmentSelectionBarHeight?: number;\n  selectedPicker?: 'images';\n};\n\nexport const AttachmentPickerContext = React.createContext(\n  DEFAULT_BASE_CONTEXT_VALUE as AttachmentPickerContextValue,\n);\n\nexport const AttachmentPickerProvider = ({\n  children,\n  value,\n}: PropsWithChildren<{\n  value?: Pick<\n    AttachmentPickerContextValue,\n    | 'attachmentSelectionBarHeight'\n    | 'attachmentPickerBottomSheetHeight'\n    | 'CameraSelectorIcon'\n    | 'closePicker'\n    | 'FileSelectorIcon'\n    | 'ImageSelectorIcon'\n    | 'openPicker'\n  > &\n    Partial<Pick<AttachmentPickerContextValue, 'bottomInset' | 'topInset'>>;\n}>) => {\n  const bottomInsetValue = value?.bottomInset;\n  const topInsetValue = value?.topInset;\n\n  const [bottomInset, setBottomInset] = useState<number>(bottomInsetValue ?? 0);\n  const [maxNumberOfFiles, setMaxNumberOfFiles] = useState(10);\n  const [selectedImages, setSelectedImages] = useState<Asset[]>([]);\n  const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n  const [selectedPicker, setSelectedPicker] = useState<'images'>();\n  const [topInset, setTopInset] = useState<number>(value?.topInset ?? 0);\n\n  useEffect(() => {\n    setBottomInset(bottomInsetValue ?? 0);\n  }, [bottomInsetValue]);\n\n  useEffect(() => {\n    setTopInset(topInsetValue ?? 0);\n  }, [topInsetValue]);\n\n  const combinedValue = {\n    maxNumberOfFiles,\n    selectedFiles,\n    selectedImages,\n    selectedPicker,\n    setBottomInset,\n    setMaxNumberOfFiles,\n    setSelectedFiles,\n    setSelectedImages,\n    setSelectedPicker,\n    setTopInset,\n    ...value,\n    bottomInset,\n    topInset,\n  };\n\n  return (\n    <AttachmentPickerContext.Provider\n      value={combinedValue as unknown as AttachmentPickerContextValue}\n    >\n      {children}\n    </AttachmentPickerContext.Provider>\n  );\n};\n\nexport const useAttachmentPickerContext = () => {\n  const contextValue = useContext(\n    AttachmentPickerContext,\n  ) as unknown as AttachmentPickerContextValue;\n\n  if (contextValue === DEFAULT_BASE_CONTEXT_VALUE && !isTestEnvironment()) {\n    throw new Error(\n      `The useAttachmentPickerContext hook was called outside the AttachmentPickerContext provider. Make sure you have configured OverlayProvider component correctly - https://getstream.io/chat/docs/sdk/reactnative/basics/hello_stream_chat/#overlay-provider`,\n    );\n  }\n\n  return contextValue;\n};\n\nexport const withAttachmentPickerContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  Component: React.ComponentType<StreamChatGenerics>,\n): React.FC<Omit<StreamChatGenerics, keyof AttachmentPickerContextValue>> => {\n  const WithAttachmentPickerContextComponent = (\n    props: Omit<StreamChatGenerics, keyof AttachmentPickerContextValue>,\n  ) => {\n    const attachmentPickerContext = useAttachmentPickerContext();\n\n    return <Component {...(props as StreamChatGenerics)} {...attachmentPickerContext} />;\n  };\n  WithAttachmentPickerContextComponent.displayName = `WithAttachmentPickerContext${getDisplayName(\n    Component as React.ComponentType,\n  )}`;\n  return WithAttachmentPickerContextComponent;\n};\n"],"mappings":"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"}