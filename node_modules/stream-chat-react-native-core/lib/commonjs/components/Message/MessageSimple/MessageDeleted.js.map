{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_merge","_MessageTextContainer","_MessageContext","_MessagesContext","_ThemeContext","_TranslationContext","_this","_jsxFileName","styles","StyleSheet","create","containerInner","borderTopLeftRadius","borderTopRightRadius","borderWidth","overflow","leftAlignItems","alignItems","rightAlignItems","MessageDeletedWithContext","props","alignment","formattedDate","groupStyle","message","MessageFooter","noBorder","onLayout","t","_useTheme","useTheme","_useTheme$theme","theme","_useTheme$theme$color","colors","grey","grey_whisper","_useTheme$theme$messa","messageSimple","content","_useTheme$theme$messa2","container","borderRadiusL","borderRadiusS","deletedContainer","deletedContainerInner","deletedText","createElement","View","style","__self","__source","fileName","lineNumber","columnNumber","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","borderColor","testID","MessageTextContainer","markdownStyles","merge","em","color","_extends2","text","isDeleted","areEqual","prevProps","nextProps","prevAlignment","prevFormattedDate","prevMessage","nextAlignment","nextFormattedDate","nextMessage","alignmentEqual","isPrevMessageTypeDeleted","type","isNextMessageTypeDeleted","messageEqual","reply_count","status","pinned","formattedDateEqual","MemoizedMessageDeleted","React","memo","MessageDeleted","_useMessageContext","useMessageContext","_useMessagesContext","useMessagesContext","_useTranslationContex","useTranslationContext","exports","displayName"],"sources":["MessageDeleted.tsx"],"sourcesContent":["import React from 'react';\nimport { LayoutChangeEvent, StyleSheet, View } from 'react-native';\n\nimport merge from 'lodash/merge';\n\nimport type { MessageFooterProps } from './MessageFooter';\nimport { MessageTextContainer } from './MessageTextContainer';\n\nimport {\n  Alignment,\n  MessageContextValue,\n  useMessageContext,\n} from '../../../contexts/messageContext/MessageContext';\nimport {\n  MessagesContextValue,\n  useMessagesContext,\n} from '../../../contexts/messagesContext/MessagesContext';\nimport { useTheme } from '../../../contexts/themeContext/ThemeContext';\nimport {\n  TranslationContextValue,\n  useTranslationContext,\n} from '../../../contexts/translationContext/TranslationContext';\n\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\nimport type { MessageType } from '../../MessageList/hooks/useMessageList';\n\nconst styles = StyleSheet.create({\n  containerInner: {\n    borderTopLeftRadius: 16,\n    borderTopRightRadius: 16,\n    borderWidth: 1,\n    overflow: 'hidden',\n  },\n  leftAlignItems: {\n    alignItems: 'flex-start',\n  },\n  rightAlignItems: {\n    alignItems: 'flex-end',\n  },\n});\n\ntype MessageDeletedComponentProps = {\n  formattedDate: string | Date;\n  groupStyle: string;\n  noBorder: boolean;\n  onLayout: (event: LayoutChangeEvent) => void;\n};\n\ntype MessageDeletedPropsWithContext<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Pick<MessageContextValue<StreamChatGenerics>, 'alignment' | 'message'> &\n  Pick<MessagesContextValue<StreamChatGenerics>, 'MessageFooter'> &\n  Pick<TranslationContextValue, 't'> &\n  MessageDeletedComponentProps;\n\nconst MessageDeletedWithContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: MessageDeletedPropsWithContext<StreamChatGenerics>,\n) => {\n  const { alignment, formattedDate, groupStyle, message, MessageFooter, noBorder, onLayout, t } =\n    props;\n\n  const {\n    theme: {\n      colors: { grey, grey_whisper },\n      messageSimple: {\n        content: {\n          container: { borderRadiusL, borderRadiusS },\n          deletedContainer,\n          deletedContainerInner,\n          deletedText,\n        },\n      },\n    },\n  } = useTheme();\n\n  return (\n    <View\n      onLayout={onLayout}\n      style={[\n        alignment === 'left' ? styles.leftAlignItems : styles.rightAlignItems,\n        deletedContainer,\n      ]}\n    >\n      <View\n        style={[\n          styles.containerInner,\n          {\n            backgroundColor: grey_whisper,\n            borderBottomLeftRadius:\n              groupStyle === 'left_bottom' || groupStyle === 'left_single'\n                ? borderRadiusS\n                : borderRadiusL,\n            borderBottomRightRadius:\n              groupStyle === 'right_bottom' || groupStyle === 'right_single'\n                ? borderRadiusS\n                : borderRadiusL,\n            borderColor: grey_whisper,\n          },\n          noBorder ? { borderWidth: 0 } : {},\n          deletedContainerInner,\n        ]}\n        testID='message-content-wrapper'\n      >\n        <MessageTextContainer<StreamChatGenerics>\n          markdownStyles={merge({ em: { color: grey } }, deletedText)}\n          message={{ ...message, text: `_${t('Message deleted')}_` }}\n        />\n      </View>\n      <MessageFooter formattedDate={formattedDate} isDeleted />\n    </View>\n  );\n};\n\nconst areEqual = <StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics>(\n  prevProps: MessageDeletedPropsWithContext<StreamChatGenerics>,\n  nextProps: MessageDeletedPropsWithContext<StreamChatGenerics>,\n) => {\n  const {\n    alignment: prevAlignment,\n    formattedDate: prevFormattedDate,\n    message: prevMessage,\n  } = prevProps;\n  const {\n    alignment: nextAlignment,\n    formattedDate: nextFormattedDate,\n    message: nextMessage,\n  } = nextProps;\n\n  const alignmentEqual = prevAlignment === nextAlignment;\n  if (!alignmentEqual) return false;\n  const isPrevMessageTypeDeleted = prevMessage.type === 'deleted';\n  const isNextMessageTypeDeleted = nextMessage.type === 'deleted';\n\n  const messageEqual =\n    isPrevMessageTypeDeleted === isNextMessageTypeDeleted &&\n    prevMessage.reply_count === nextMessage.reply_count &&\n    prevMessage.status === nextMessage.status &&\n    prevMessage.type === nextMessage.type &&\n    prevMessage.text === nextMessage.text &&\n    prevMessage.pinned === nextMessage.pinned;\n  if (!messageEqual) return false;\n\n  const formattedDateEqual = prevFormattedDate === nextFormattedDate;\n  if (!formattedDateEqual) return false;\n\n  return true;\n};\n\nconst MemoizedMessageDeleted = React.memo(\n  MessageDeletedWithContext,\n  areEqual,\n) as typeof MessageDeletedWithContext;\n\nexport type MessageDeletedProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = MessageDeletedComponentProps & {\n  alignment?: Alignment;\n  message?: MessageType<StreamChatGenerics>;\n  MessageFooter?: React.ComponentType<MessageFooterProps<StreamChatGenerics>>;\n};\n\nexport const MessageDeleted = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: MessageDeletedProps<StreamChatGenerics>,\n) => {\n  const { alignment, message } = useMessageContext<StreamChatGenerics>();\n\n  const { MessageFooter } = useMessagesContext<StreamChatGenerics>();\n\n  const { t } = useTranslationContext();\n\n  return (\n    <MemoizedMessageDeleted\n      {...{\n        alignment,\n        message,\n        MessageFooter,\n        t,\n      }}\n      {...props}\n    />\n  );\n};\n\nMessageDeleted.displayName = 'MessageDeleted{messageSimple{content}}';\n"],"mappings":"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"}