{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeGestureHandler","_reactNativeReanimated","_ThemeContext","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","height","styles","StyleSheet","create","containerStyle","borderRadius","innerStyle","progressControlThumbStyle","elevation","shadowOffset","width","shadowOpacity","shadowRadius","top","ProgressControlThumb","_useTheme","useTheme","black","theme","colors","createElement","View","style","backgroundColor","shadowColor","__self","__source","fileName","lineNumber","columnNumber","ProgressControl","React","memo","props","duration","filledColor","onPlayPause","onProgressDrag","progress","testID","_useTheme2","grey_dark","state","useSharedValue","translateX","useEffect","value","animatedStyles","useAnimatedStyle","thumbStyles","transform","onGestureEvent","useAnimatedGestureHandler","onActive","event","translationX","onFinish","dragFinishLocationInSeconds","runOnJS","onStart","cancelAnimation","PanGestureHandler","maxPointers","undefined","prevProps","nextProps","exports"],"sources":["ProgressControl.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { StyleSheet, View } from 'react-native';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, {\n  cancelAnimation,\n  runOnJS,\n  useAnimatedGestureHandler,\n  useAnimatedStyle,\n  useSharedValue,\n} from 'react-native-reanimated';\n\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\n\nexport type ProgressControlProps = {\n  duration: number;\n  filledColor: string;\n  onPlayPause: (status?: boolean) => void;\n  progress: number;\n  testID: string;\n  width: number;\n  onProgressDrag?: (progress: number) => void;\n};\n\nconst height = 2;\nconst styles = StyleSheet.create({\n  containerStyle: {\n    borderRadius: 50,\n    height,\n  },\n  innerStyle: {\n    height,\n  },\n  progressControlThumbStyle: {\n    borderRadius: 5,\n    elevation: 6,\n    height: 20,\n    shadowOffset: {\n      height: 3,\n      width: 0,\n    },\n    shadowOpacity: 0.27,\n    shadowRadius: 4.65,\n    top: -11,\n    width: 5,\n  },\n});\n\nconst ProgressControlThumb = () => {\n  const {\n    theme: {\n      colors: { black },\n    },\n  } = useTheme();\n  return (\n    <View\n      style={[styles.progressControlThumbStyle, { backgroundColor: '#ffffff', shadowColor: black }]}\n    />\n  );\n};\n\nexport const ProgressControl: React.FC<ProgressControlProps> = React.memo(\n  (props) => {\n    const { duration, filledColor, onPlayPause, onProgressDrag, progress, testID, width } = props;\n    const {\n      theme: {\n        colors: { grey_dark },\n      },\n    } = useTheme();\n\n    const state = useSharedValue(0);\n    const translateX = useSharedValue(0);\n\n    useEffect(() => {\n      state.value = progress * width;\n      translateX.value = progress * width;\n    }, [progress]);\n\n    const animatedStyles = useAnimatedStyle(() => ({\n      backgroundColor: filledColor,\n      width: state.value,\n    }));\n\n    const thumbStyles = useAnimatedStyle(() => ({\n      transform: [{ translateX: state.value }],\n    }));\n\n    const onGestureEvent = useAnimatedGestureHandler(\n      {\n        onActive: (event) => {\n          state.value = translateX.value + event.translationX;\n          if (state.value > width) state.value = width;\n          else if (state.value < 0) state.value = 0;\n        },\n        onFinish: () => {\n          translateX.value = state.value;\n          const dragFinishLocationInSeconds = (state.value / width) * duration;\n          if (onProgressDrag) runOnJS(onProgressDrag)(dragFinishLocationInSeconds);\n          runOnJS(onPlayPause)(false);\n        },\n        onStart: () => {\n          runOnJS(onPlayPause)(true);\n          cancelAnimation(translateX);\n          state.value = translateX.value;\n        },\n      },\n      [duration],\n    );\n    return (\n      <View style={[styles.containerStyle, { backgroundColor: grey_dark, width }]}>\n        <Animated.View style={[styles.innerStyle, animatedStyles]} />\n\n        <PanGestureHandler\n          maxPointers={1}\n          onGestureEvent={onProgressDrag ? onGestureEvent : undefined}\n          testID={testID}\n        >\n          <Animated.View style={[thumbStyles]}>\n            {onProgressDrag && <ProgressControlThumb />}\n          </Animated.View>\n        </PanGestureHandler>\n      </View>\n    );\n  },\n  (prevProps, nextProps) => {\n    if (prevProps.duration === nextProps.duration && prevProps.progress === nextProps.progress)\n      return true;\n    else return false;\n  },\n);\n"],"mappings":"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"}