{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactNativeSvg","_interopRequireWildcard","_ThemeContext","_useLoadingImage2","_getResizedImageUrl","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","randomImageBaseUrl","randomSvgBaseUrl","streamCDN","styles","StyleSheet","create","container","alignItems","justifyContent","overflow","presenceIndicatorContainer","height","position","right","top","width","getInitials","fullName","split","slice","map","name","charAt","join","Avatar","props","containerStyle","_props$ImageComponent","ImageComponent","Image","imageProp","image","imageStyle","online","presenceIndicatorProp","presenceIndicator","presenceIndicatorContainerStyle","size","testID","_useTheme","useTheme","_useTheme$theme","theme","_useTheme$theme$avata","avatar","_useTheme$theme$color","colors","accent_green","white","_useLoadingImage","useLoadingImage","isLoadingImageError","setLoadingImageError","createElement","View","__self","__source","fileName","lineNumber","columnNumber","style","borderRadius","backgroundColor","accessibilityLabel","onError","source","uri","includes","getResizedImageUrl","url","Circle","_extends2","fill","stroke","exports","displayName"],"sources":["Avatar.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  Image,\n  ImageProps,\n  ImageStyle,\n  StyleProp,\n  StyleSheet,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport Svg, { Circle, CircleProps } from 'react-native-svg';\n\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\nimport { useLoadingImage } from '../../hooks/useLoadingImage';\nimport { getResizedImageUrl } from '../../utils/getResizedImageUrl';\n\nconst randomImageBaseUrl = 'https://getstream.io/random_png/';\nconst randomSvgBaseUrl = 'https://getstream.io/random_svg/';\nconst streamCDN = 'stream-io-cdn.com';\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflow: 'hidden',\n  },\n  presenceIndicatorContainer: {\n    height: 12,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    width: 12,\n  },\n});\n\nconst getInitials = (fullName: string) =>\n  fullName\n    .split(' ')\n    .slice(0, 2)\n    .map((name) => name.charAt(0))\n    .join(' ');\n\nexport type AvatarProps = {\n  /** size in pixels */\n  size: number;\n  containerStyle?: StyleProp<ViewStyle>;\n  /** image url */\n  image?: string;\n  ImageComponent?: React.ComponentType<ImageProps>;\n  /** name of the picture, used for fallback */\n  imageStyle?: StyleProp<ImageStyle>;\n  name?: string;\n  online?: boolean;\n  presenceIndicator?: CircleProps;\n  presenceIndicatorContainerStyle?: StyleProp<ViewStyle>;\n  testID?: string;\n};\n\n/**\n * Avatar - A round avatar image with fallback to user's initials.\n */\nexport const Avatar: React.FC<AvatarProps> = (props) => {\n  const {\n    containerStyle,\n    ImageComponent = Image,\n    image: imageProp,\n    imageStyle,\n    name,\n    online,\n    presenceIndicator: presenceIndicatorProp,\n    presenceIndicatorContainerStyle,\n    size,\n    testID,\n  } = props;\n  const {\n    theme: {\n      avatar: { container, image, presenceIndicator, presenceIndicatorContainer },\n      colors: { accent_green, white },\n    },\n  } = useTheme();\n\n  const { isLoadingImageError, setLoadingImageError } = useLoadingImage();\n\n  return (\n    <View>\n      <View\n        style={[\n          styles.container,\n          {\n            borderRadius: size / 2,\n            height: size,\n            width: size,\n          },\n          container,\n          containerStyle,\n        ]}\n      >\n        {isLoadingImageError ? (\n          <View\n            style={{\n              backgroundColor: '#ececec',\n              borderRadius: size / 2,\n              height: size,\n              width: size,\n            }}\n          />\n        ) : (\n          <ImageComponent\n            accessibilityLabel={testID || 'Avatar Image'}\n            onError={() => setLoadingImageError(true)}\n            source={{\n              uri:\n                !imageProp ||\n                imageProp.includes(randomImageBaseUrl) ||\n                imageProp.includes(randomSvgBaseUrl)\n                  ? imageProp?.includes(streamCDN)\n                    ? imageProp\n                    : `${randomImageBaseUrl}${\n                        name ? `?name=${getInitials(name)}&size=${size}` : ''\n                      }`\n                  : getResizedImageUrl({\n                      height: size,\n                      url: imageProp,\n                      width: size,\n                    }),\n            }}\n            style={[\n              image,\n              size\n                ? {\n                    backgroundColor: '#ececec',\n                    borderRadius: size / 2,\n                    height: size,\n                    width: size,\n                  }\n                : {},\n              imageStyle,\n            ]}\n            testID={testID || 'avatar-image'}\n          />\n        )}\n      </View>\n      {online && (\n        <View\n          style={[\n            styles.presenceIndicatorContainer,\n            presenceIndicatorContainer,\n            presenceIndicatorContainerStyle,\n          ]}\n        >\n          <Svg>\n            <Circle\n              fill={accent_green}\n              stroke={white}\n              {...presenceIndicator}\n              {...presenceIndicatorProp}\n            />\n          </Svg>\n        </View>\n      )}\n    </View>\n  );\n};\n\nAvatar.displayName = 'Avatar{avatar}';\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AASA,IAAAE,eAAA,GAAAC,uBAAA,CAAAH,OAAA;AAEA,IAAAI,aAAA,GAAAJ,OAAA;AACA,IAAAK,iBAAA,GAAAL,OAAA;AACA,IAAAM,mBAAA,GAAAN,OAAA;AAAoE,IAAAO,KAAA;EAAAC,YAAA;AAAA,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAP,wBAAAW,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAE,OAAA,CAAAF,GAAA,yBAAAA,GAAA,uCAAAA,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,cAAAN,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAEpE,IAAMW,kBAAkB,GAAG,kCAAkC;AAC7D,IAAMC,gBAAgB,GAAG,kCAAkC;AAC3D,IAAMC,SAAS,GAAG,mBAAmB;AAErC,IAAMC,MAAM,GAAGC,uBAAU,CAACC,MAAM,CAAC;EAC/BC,SAAS,EAAE;IACTC,UAAU,EAAE,QAAQ;IACpBC,cAAc,EAAE,QAAQ;IACxBC,QAAQ,EAAE;EACZ,CAAC;EACDC,0BAA0B,EAAE;IAC1BC,MAAM,EAAE,EAAE;IACVC,QAAQ,EAAE,UAAU;IACpBC,KAAK,EAAE,CAAC;IACRC,GAAG,EAAE,CAAC;IACNC,KAAK,EAAE;EACT;AACF,CAAC,CAAC;AAEF,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,QAAgB;EAAA,OACnCA,QAAQ,CACLC,KAAK,CAAC,GAAG,CAAC,CACVC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CACXC,GAAG,CAAC,UAACC,IAAI;IAAA,OAAKA,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC;EAAA,EAAC,CAC7BC,IAAI,CAAC,GAAG,CAAC;AAAA;AAqBP,IAAMC,MAA6B,GAAG,SAAhCA,MAA6BA,CAAIC,KAAK,EAAK;EACtD,IACEC,cAAc,GAUZD,KAAK,CAVPC,cAAc;IAAAC,qBAAA,GAUZF,KAAK,CATPG,cAAc;IAAdA,cAAc,GAAAD,qBAAA,cAAGE,kBAAK,GAAAF,qBAAA;IACfG,SAAS,GAQdL,KAAK,CARPM,KAAK;IACLC,UAAU,GAORP,KAAK,CAPPO,UAAU;IACVX,IAAI,GAMFI,KAAK,CANPJ,IAAI;IACJY,MAAM,GAKJR,KAAK,CALPQ,MAAM;IACaC,qBAAqB,GAItCT,KAAK,CAJPU,iBAAiB;IACjBC,+BAA+B,GAG7BX,KAAK,CAHPW,+BAA+B;IAC/BC,IAAI,GAEFZ,KAAK,CAFPY,IAAI;IACJC,MAAM,GACJb,KAAK,CADPa,MAAM;EAER,IAAAC,SAAA,GAKI,IAAAC,sBAAQ,EAAC,CAAC;IAAAC,eAAA,GAAAF,SAAA,CAJZG,KAAK;IAAAC,qBAAA,GAAAF,eAAA,CACHG,MAAM;IAAItC,SAAS,GAAAqC,qBAAA,CAATrC,SAAS;IAAEyB,KAAK,GAAAY,qBAAA,CAALZ,KAAK;IAAEI,iBAAiB,GAAAQ,qBAAA,CAAjBR,iBAAiB;IAAEzB,0BAA0B,GAAAiC,qBAAA,CAA1BjC,0BAA0B;IAAAmC,qBAAA,GAAAJ,eAAA,CACzEK,MAAM;IAAIC,YAAY,GAAAF,qBAAA,CAAZE,YAAY;IAAEC,KAAK,GAAAH,qBAAA,CAALG,KAAK;EAIjC,IAAAC,gBAAA,GAAsD,IAAAC,iCAAe,EAAC,CAAC;IAA/DC,mBAAmB,GAAAF,gBAAA,CAAnBE,mBAAmB;IAAEC,oBAAoB,GAAAH,gBAAA,CAApBG,oBAAoB;EAEjD,OACErF,MAAA,YAAAsF,aAAA,CAACnF,YAAA,CAAAoF,IAAI;IAAAC,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,GACH5F,MAAA,YAAAsF,aAAA,CAACnF,YAAA,CAAAoF,IAAI;IACHM,KAAK,EAAE,CACLzD,MAAM,CAACG,SAAS,EAChB;MACEuD,YAAY,EAAExB,IAAI,GAAG,CAAC;MACtB1B,MAAM,EAAE0B,IAAI;MACZtB,KAAK,EAAEsB;IACT,CAAC,EACD/B,SAAS,EACToB,cAAc,CACd;IAAA6B,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDR,mBAAmB,GAClBpF,MAAA,YAAAsF,aAAA,CAACnF,YAAA,CAAAoF,IAAI;IACHM,KAAK,EAAE;MACLE,eAAe,EAAE,SAAS;MAC1BD,YAAY,EAAExB,IAAI,GAAG,CAAC;MACtB1B,MAAM,EAAE0B,IAAI;MACZtB,KAAK,EAAEsB;IACT,CAAE;IAAAkB,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CAAC,GAEF5F,MAAA,YAAAsF,aAAA,CAACzB,cAAc;IACbmC,kBAAkB,EAAEzB,MAAM,IAAI,cAAe;IAC7C0B,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMZ,oBAAoB,CAAC,IAAI,CAAC;IAAA,CAAC;IAC1Ca,MAAM,EAAE;MACNC,GAAG,EACD,CAACpC,SAAS,IACVA,SAAS,CAACqC,QAAQ,CAACnE,kBAAkB,CAAC,IACtC8B,SAAS,CAACqC,QAAQ,CAAClE,gBAAgB,CAAC,GAChC6B,SAAS,YAATA,SAAS,CAAEqC,QAAQ,CAACjE,SAAS,CAAC,GAC5B4B,SAAS,QACN9B,kBAAkB,IACnBqB,IAAI,cAAYL,WAAW,CAACK,IAAI,CAAC,cAASgB,IAAI,GAAK,EAAE,CACrD,GACJ,IAAA+B,sCAAkB,EAAC;QACjBzD,MAAM,EAAE0B,IAAI;QACZgC,GAAG,EAAEvC,SAAS;QACdf,KAAK,EAAEsB;MACT,CAAC;IACT,CAAE;IACFuB,KAAK,EAAE,CACL7B,KAAK,EACLM,IAAI,GACA;MACEyB,eAAe,EAAE,SAAS;MAC1BD,YAAY,EAAExB,IAAI,GAAG,CAAC;MACtB1B,MAAM,EAAE0B,IAAI;MACZtB,KAAK,EAAEsB;IACT,CAAC,GACD,CAAC,CAAC,EACNL,UAAU,CACV;IACFM,MAAM,EAAEA,MAAM,IAAI,cAAe;IAAAiB,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,CAClC,CAEC,CAAC,EACN1B,MAAM,IACLlE,MAAA,YAAAsF,aAAA,CAACnF,YAAA,CAAAoF,IAAI;IACHM,KAAK,EAAE,CACLzD,MAAM,CAACO,0BAA0B,EACjCA,0BAA0B,EAC1B0B,+BAA+B,CAC/B;IAAAmB,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEF5F,MAAA,YAAAsF,aAAA,CAAClF,eAAA,WAAG;IAAAoF,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,GACF5F,MAAA,YAAAsF,aAAA,CAAClF,eAAA,CAAAmG,MAAM,MAAAC,SAAA;IACLC,IAAI,EAAEzB,YAAa;IACnB0B,MAAM,EAAEzB;EAAM,GACVb,iBAAiB,EACjBD,qBAAqB;IAAAqB,MAAA,EAAA/E,KAAA;IAAAgF,QAAA;MAAAC,QAAA,EAAAhF,YAAA;MAAAiF,UAAA;MAAAC,YAAA;IAAA;EAAA,EAC1B,CACE,CACD,CAEJ,CAAC;AAEX,CAAC;AAACe,OAAA,CAAAlD,MAAA,GAAAA,MAAA;AAEFA,MAAM,CAACmD,WAAW,GAAG,gBAAgB"}