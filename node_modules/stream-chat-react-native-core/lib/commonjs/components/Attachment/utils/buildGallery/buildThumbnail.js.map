{"version":3,"names":["_getResizedImageUrl","require","_getUrlOfImageAttachment","buildThumbnail","_ref","height","image","resizeMode","width","originalImageHeight","original_height","originalImageWidth","original_width","shouldResize","imageUrl","getUrlOfImageAttachment","thumb_url","type","url","getResizedImageUrl"],"sources":["buildThumbnail.ts"],"sourcesContent":["import type { ImageResizeMode } from 'react-native';\n\nimport type { Attachment } from 'stream-chat';\n\nimport type { Thumbnail } from './types';\n\nimport type { DefaultStreamChatGenerics } from '../../../../types/types';\n\nimport { getResizedImageUrl } from '../../../../utils/getResizedImageUrl';\nimport { getUrlOfImageAttachment } from '../../../../utils/getUrlOfImageAttachment';\n\nexport function buildThumbnail<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  height,\n  image,\n  resizeMode,\n  width,\n}: {\n  height: number;\n  image: Attachment<StreamChatGenerics>;\n  width: number;\n  resizeMode?: ImageResizeMode;\n}): Thumbnail {\n  const { original_height: originalImageHeight, original_width: originalImageWidth } = image;\n\n  // Only resize if the original image is larger than the thumbnail container size.\n  const shouldResize =\n    originalImageHeight && originalImageWidth\n      ? originalImageHeight + originalImageWidth > height + width\n      : true;\n  const imageUrl = getUrlOfImageAttachment(image) as string;\n\n  return {\n    height,\n    resizeMode: resizeMode\n      ? resizeMode\n      : ((image.original_height && image.original_width ? 'contain' : 'cover') as ImageResizeMode),\n    thumb_url: image.thumb_url,\n    type: image.type,\n    url: shouldResize\n      ? getResizedImageUrl({\n          height,\n          url: imageUrl,\n          width,\n        })\n      : imageUrl,\n    width,\n  };\n}\n"],"mappings":";;;;AAQA,IAAAA,mBAAA,GAAAC,OAAA;AACA,IAAAC,wBAAA,GAAAD,OAAA;AAEO,SAASE,cAAcA,CAAAC,IAAA,EAYhB;EAAA,IATZC,MAAM,GAAAD,IAAA,CAANC,MAAM;IACNC,KAAK,GAAAF,IAAA,CAALE,KAAK;IACLC,UAAU,GAAAH,IAAA,CAAVG,UAAU;IACVC,KAAK,GAAAJ,IAAA,CAALI,KAAK;EAOL,IAAyBC,mBAAmB,GAAyCH,KAAK,CAAlFI,eAAe;IAAuCC,kBAAkB,GAAKL,KAAK,CAA5CM,cAAc;EAG5D,IAAMC,YAAY,GAChBJ,mBAAmB,IAAIE,kBAAkB,GACrCF,mBAAmB,GAAGE,kBAAkB,GAAGN,MAAM,GAAGG,KAAK,GACzD,IAAI;EACV,IAAMM,QAAQ,GAAG,IAAAC,gDAAuB,EAACT,KAAK,CAAW;EAEzD,OAAO;IACLD,MAAM,EAANA,MAAM;IACNE,UAAU,EAAEA,UAAU,GAClBA,UAAU,GACRD,KAAK,CAACI,eAAe,IAAIJ,KAAK,CAACM,cAAc,GAAG,SAAS,GAAG,OAA4B;IAC9FI,SAAS,EAAEV,KAAK,CAACU,SAAS;IAC1BC,IAAI,EAAEX,KAAK,CAACW,IAAI;IAChBC,GAAG,EAAEL,YAAY,GACb,IAAAM,sCAAkB,EAAC;MACjBd,MAAM,EAANA,MAAM;MACNa,GAAG,EAAEJ,QAAQ;MACbN,KAAK,EAALA;IACF,CAAC,CAAC,GACFM,QAAQ;IACZN,KAAK,EAALA;EACF,CAAC;AACH"}