{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_ChatContext","_utils","_excluded","_this","_jsxFileName","GalleryImageWithContext","props","_props$ImageComponent","ImageComponent","Image","uri","rest","_objectWithoutProperties2","isLocalUrl","createElement","_extends2","accessibilityLabel","source","makeImageCompatibleUrl","__self","__source","fileName","lineNumber","columnNumber","exports","MemoizedGalleryImage","React","memo","prevProps","nextProps","getUrlWithoutParams","GalleryImage","_useChatContext","useChatContext"],"sources":["GalleryImage.tsx"],"sourcesContent":["import React from 'react';\nimport { Image, ImageProps } from 'react-native';\n\nimport { ChatContextValue, useChatContext } from '../../contexts/chatContext/ChatContext';\n\nimport type { DefaultStreamChatGenerics } from '../../types/types';\nimport { getUrlWithoutParams, isLocalUrl, makeImageCompatibleUrl } from '../../utils/utils';\n\nexport type GalleryImageWithContextProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = GalleryImageProps & Pick<ChatContextValue<StreamChatGenerics>, 'ImageComponent'>;\n\nexport const GalleryImageWithContext: React.FC<GalleryImageWithContextProps> = (props) => {\n  const { ImageComponent = Image, uri, ...rest } = props;\n\n  // Caching image components such as FastImage will not work with local images.\n  // This for the case of local uris, we use the default Image component.\n  if (!isLocalUrl(uri)) {\n    return (\n      <ImageComponent\n        {...rest}\n        accessibilityLabel='Gallery Image'\n        source={{\n          uri: makeImageCompatibleUrl(uri),\n        }}\n      />\n    );\n  }\n\n  return (\n    <Image\n      {...rest}\n      accessibilityLabel='Gallery Image'\n      source={{\n        uri: makeImageCompatibleUrl(uri),\n      }}\n    />\n  );\n};\n\nexport const MemoizedGalleryImage = React.memo(\n  GalleryImageWithContext,\n  (prevProps, nextProps) =>\n    getUrlWithoutParams(prevProps.uri) === getUrlWithoutParams(nextProps.uri),\n);\nexport type GalleryImageProps = Omit<ImageProps, 'height' | 'source'> & {\n  uri: string;\n};\n\nexport const GalleryImage = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: GalleryImageProps,\n) => {\n  const { ImageComponent } = useChatContext<StreamChatGenerics>();\n\n  return <MemoizedGalleryImage ImageComponent={ImageComponent} {...props} />;\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,YAAA,GAAAF,OAAA;AAGA,IAAAG,MAAA,GAAAH,OAAA;AAA4F,IAAAI,SAAA;AAAA,IAAAC,KAAA;EAAAC,YAAA;AAMrF,IAAMC,uBAA+D,GAAG,SAAlEA,uBAA+DA,CAAIC,KAAK,EAAK;EACxF,IAAAC,qBAAA,GAAiDD,KAAK,CAA9CE,cAAc;IAAdA,cAAc,GAAAD,qBAAA,cAAGE,kBAAK,GAAAF,qBAAA;IAAEG,GAAG,GAAcJ,KAAK,CAAtBI,GAAG;IAAKC,IAAI,OAAAC,yBAAA,aAAKN,KAAK,EAAAJ,SAAA;EAItD,IAAI,CAAC,IAAAW,iBAAU,EAACH,GAAG,CAAC,EAAE;IACpB,OACEd,MAAA,YAAAkB,aAAA,CAACN,cAAc,MAAAO,SAAA,iBACTJ,IAAI;MACRK,kBAAkB,EAAC,eAAe;MAClCC,MAAM,EAAE;QACNP,GAAG,EAAE,IAAAQ,6BAAsB,EAACR,GAAG;MACjC,CAAE;MAAAS,MAAA,EAAAhB,KAAA;MAAAiB,QAAA;QAAAC,QAAA,EAAAjB,YAAA;QAAAkB,UAAA;QAAAC,YAAA;MAAA;IAAA,EACH,CAAC;EAEN;EAEA,OACE3B,MAAA,YAAAkB,aAAA,CAACf,YAAA,CAAAU,KAAK,MAAAM,SAAA,iBACAJ,IAAI;IACRK,kBAAkB,EAAC,eAAe;IAClCC,MAAM,EAAE;MACNP,GAAG,EAAE,IAAAQ,6BAAsB,EAACR,GAAG;IACjC,CAAE;IAAAS,MAAA,EAAAhB,KAAA;IAAAiB,QAAA;MAAAC,QAAA,EAAAjB,YAAA;MAAAkB,UAAA;MAAAC,YAAA;IAAA;EAAA,EACH,CAAC;AAEN,CAAC;AAACC,OAAA,CAAAnB,uBAAA,GAAAA,uBAAA;AAEK,IAAMoB,oBAAoB,GAAGC,iBAAK,CAACC,IAAI,CAC5CtB,uBAAuB,EACvB,UAACuB,SAAS,EAAEC,SAAS;EAAA,OACnB,IAAAC,0BAAmB,EAACF,SAAS,CAAClB,GAAG,CAAC,KAAK,IAAAoB,0BAAmB,EAACD,SAAS,CAACnB,GAAG,CAAC;AAAA,CAC7E,CAAC;AAACc,OAAA,CAAAC,oBAAA,GAAAA,oBAAA;AAKK,IAAMM,YAAY,GAAG,SAAfA,YAAYA,CAGvBzB,KAAwB,EACrB;EACH,IAAA0B,eAAA,GAA2B,IAAAC,2BAAc,EAAqB,CAAC;IAAvDzB,cAAc,GAAAwB,eAAA,CAAdxB,cAAc;EAEtB,OAAOZ,MAAA,YAAAkB,aAAA,CAACW,oBAAoB,MAAAV,SAAA;IAACP,cAAc,EAAEA;EAAe,GAAKF,KAAK;IAAAa,MAAA,EAAAhB,KAAA;IAAAiB,QAAA;MAAAC,QAAA,EAAAjB,YAAA;MAAAkB,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAG,CAAC;AAC5E,CAAC;AAACC,OAAA,CAAAO,YAAA,GAAAA,YAAA"}