{"version":3,"names":["_react","require","_ChatContext","useChannelTruncated","_ref","onChannelTruncated","refreshList","setChannels","setForceUpdate","_useChatContext","useChatContext","client","useEffect","handleEvent","event","count","listener","on","unsubscribe","exports"],"sources":["useChannelTruncated.ts"],"sourcesContent":["import { useEffect } from 'react';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport { useChatContext } from '../../../../contexts/chatContext/ChatContext';\n\nimport type { DefaultStreamChatGenerics } from '../../../../types/types';\n\ntype Parameters<StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics> =\n  {\n    refreshList: () => void;\n    setChannels: React.Dispatch<React.SetStateAction<Channel<StreamChatGenerics>[] | null>>;\n    setForceUpdate: React.Dispatch<React.SetStateAction<number>>;\n    onChannelTruncated?: (\n      setChannels: React.Dispatch<React.SetStateAction<Channel<StreamChatGenerics>[] | null>>,\n      event: Event<StreamChatGenerics>,\n    ) => void;\n  };\n\nexport const useChannelTruncated = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  onChannelTruncated,\n  refreshList,\n  setChannels,\n  setForceUpdate,\n}: Parameters<StreamChatGenerics>) => {\n  const { client } = useChatContext<StreamChatGenerics>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<StreamChatGenerics>) => {\n      if (typeof onChannelTruncated === 'function') {\n        onChannelTruncated(setChannels, event);\n      }\n      refreshList();\n      setForceUpdate((count) => count + 1);\n    };\n\n    const listener = client?.on('channel.truncated', handleEvent);\n    return () => listener?.unsubscribe();\n  }, []);\n};\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAIA,IAAAC,YAAA,GAAAD,OAAA;AAeO,IAAME,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAAC,IAAA,EAOM;EAAA,IAJpCC,kBAAkB,GAAAD,IAAA,CAAlBC,kBAAkB;IAClBC,WAAW,GAAAF,IAAA,CAAXE,WAAW;IACXC,WAAW,GAAAH,IAAA,CAAXG,WAAW;IACXC,cAAc,GAAAJ,IAAA,CAAdI,cAAc;EAEd,IAAAC,eAAA,GAAmB,IAAAC,2BAAc,EAAqB,CAAC;IAA/CC,MAAM,GAAAF,eAAA,CAANE,MAAM;EAEd,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAgC,EAAK;MACxD,IAAI,OAAOT,kBAAkB,KAAK,UAAU,EAAE;QAC5CA,kBAAkB,CAACE,WAAW,EAAEO,KAAK,CAAC;MACxC;MACAR,WAAW,CAAC,CAAC;MACbE,cAAc,CAAC,UAACO,KAAK;QAAA,OAAKA,KAAK,GAAG,CAAC;MAAA,EAAC;IACtC,CAAC;IAED,IAAMC,QAAQ,GAAGL,MAAM,oBAANA,MAAM,CAAEM,EAAE,CAAC,mBAAmB,EAAEJ,WAAW,CAAC;IAC7D,OAAO;MAAA,OAAMG,QAAQ,oBAARA,QAAQ,CAAEE,WAAW,CAAC,CAAC;IAAA;EACtC,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACC,OAAA,CAAAhB,mBAAA,GAAAA,mBAAA"}