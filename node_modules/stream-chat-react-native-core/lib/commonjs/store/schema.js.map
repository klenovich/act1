{"version":3,"names":["tables","channelQueries","columns","cids","id","primaryKey","channels","autoTranslationEnabled","autoTranslationLanguage","cid","config","cooldown","createdAt","createdById","deletedAt","disabled","extraData","frozen","hidden","invites","lastMessageAt","memberCount","muted","ownCapabilities","team","truncatedAt","truncatedBy","truncatedById","type","updatedAt","members","banned","channelRole","inviteAcceptedAt","invited","inviteRejectedAt","isModerator","role","shadowBanned","userId","foreignKeys","column","onDeleteAction","referenceTable","referenceTableColumn","indexes","name","unique","messages","attachments","reactionCounts","text","pendingTasks","channelId","channelType","messageId","payload","reactions","score","reads","lastRead","unreadMessages","users","lastActive","online","userSyncStatus","appSettings","lastSyncedAt","exports"],"sources":["schema.ts"],"sourcesContent":["import type { MessageLabel, Role } from 'stream-chat';\n\nimport type { PendingTaskTypes } from './types';\n\nimport type { ValueOf } from '../types/types';\n\ntype Tables = {\n  [P in keyof Schema]: {\n    columns: {\n      [K in keyof Schema[P]]: string;\n    };\n    foreignKeys?: Array<{\n      column: `${Exclude<keyof Schema[P], symbol>}`;\n      referenceTable: `${keyof Schema}`;\n      referenceTableColumn: string;\n      // https://www.sqlite.org/foreignkeys.html#fk_actions\n      onDeleteAction?: 'NO ACTION' | 'RESTRICT' | 'SET NULL' | 'SET DEFAULT' | 'CASCADE';\n    }>;\n    indexes?: Array<{\n      columns: Array<keyof Schema[P]>;\n      name: string;\n      unique: boolean;\n    }>;\n    primaryKey?: Array<keyof Schema[P]>;\n  };\n};\n\nexport const tables: Tables = {\n  channelQueries: {\n    columns: {\n      cids: 'TEXT',\n      id: 'TEXT',\n    },\n    primaryKey: ['id'],\n  },\n  channels: {\n    columns: {\n      autoTranslationEnabled: 'BOOLEAN',\n      autoTranslationLanguage: 'TEXT',\n      cid: 'TEXT',\n      config: 'TEXT',\n      cooldown: 'BOOLEAN',\n      createdAt: 'TEXT',\n      createdById: 'TEXT',\n      deletedAt: 'TEXT',\n      disabled: 'BOOLEAN DEFAULT FALSE',\n      extraData: 'TEXT',\n      frozen: 'BOOLEAN',\n      hidden: 'BOOLEAN',\n      id: 'TEXT',\n      invites: 'TEXT',\n      lastMessageAt: 'TEXT',\n      memberCount: 'INTEGER',\n      muted: 'BOOLEAN DEFAULT FALSE',\n      ownCapabilities: 'TEXT',\n      team: 'TEXT',\n      truncatedAt: 'TEXT',\n      truncatedBy: 'TEXT',\n      truncatedById: 'TEXT',\n      type: 'TEXT',\n      updatedAt: 'TEXT',\n    },\n    primaryKey: ['cid'],\n  },\n  members: {\n    columns: {\n      banned: 'BOOLEAN DEFAULT FALSE',\n      channelRole: 'TEXT',\n      cid: 'TEXT NOT NULL',\n      createdAt: 'TEXT',\n      inviteAcceptedAt: 'TEXT',\n      invited: 'BOOLEAN',\n      inviteRejectedAt: 'TEXT',\n      isModerator: 'BOOLEAN',\n      role: 'TEXT',\n      shadowBanned: 'BOOLEAN DEFAULT FALSE',\n      updatedAt: 'TEXT',\n      userId: 'TEXT',\n    },\n    foreignKeys: [\n      {\n        column: 'cid',\n        onDeleteAction: 'CASCADE',\n        referenceTable: 'channels',\n        referenceTableColumn: 'cid',\n      },\n    ],\n    indexes: [\n      {\n        columns: ['cid', 'userId'],\n        name: 'index_members',\n        unique: false,\n      },\n    ],\n    primaryKey: ['cid', 'userId'],\n  },\n  messages: {\n    columns: {\n      attachments: 'TEXT',\n      cid: 'TEXT NOT NULL',\n      createdAt: 'TEXT',\n      deletedAt: 'TEXT',\n      extraData: 'TEXT',\n      id: 'TEXT',\n      reactionCounts: 'TEXT',\n      text: \"TEXT DEFAULT ''\",\n      type: 'TEXT',\n      updatedAt: 'TEXT',\n      userId: 'TEXT',\n    },\n    foreignKeys: [\n      {\n        column: 'cid',\n        onDeleteAction: 'CASCADE',\n        referenceTable: 'channels',\n        referenceTableColumn: 'cid',\n      },\n    ],\n    indexes: [\n      {\n        columns: ['cid', 'userId'],\n        name: 'index_messages',\n        unique: false,\n      },\n    ],\n    primaryKey: ['id'],\n  },\n  pendingTasks: {\n    columns: {\n      channelId: 'TEXT',\n      channelType: 'TEXT',\n      createdAt: 'TEXT',\n      id: 'INTEGER PRIMARY KEY AUTOINCREMENT',\n      messageId: 'TEXT',\n      payload: 'TEXT',\n      type: 'TEXT',\n    },\n  },\n  reactions: {\n    columns: {\n      createdAt: 'TEXT',\n      extraData: 'TEXT',\n      messageId: 'TEXT',\n      score: 'INTEGER DEFAULT 0',\n      type: 'TEXT',\n      updatedAt: 'TEXT',\n      userId: 'TEXT',\n    },\n    foreignKeys: [\n      {\n        column: 'messageId',\n        onDeleteAction: 'CASCADE',\n        referenceTable: 'messages',\n        referenceTableColumn: 'id',\n      },\n    ],\n    indexes: [\n      {\n        columns: ['messageId', 'userId'],\n        name: 'index_reaction',\n        unique: false,\n      },\n    ],\n    primaryKey: ['messageId', 'userId', 'type'],\n  },\n  reads: {\n    columns: {\n      cid: 'TEXT NOT NULL',\n      lastRead: 'TEXT NOT NULL',\n      unreadMessages: 'INTEGER DEFAULT 0',\n      userId: 'TEXT',\n    },\n    indexes: [\n      {\n        columns: ['cid', 'userId'],\n        name: 'index_reads_cid',\n        unique: false,\n      },\n    ],\n    primaryKey: ['userId', 'cid'],\n  },\n  users: {\n    columns: {\n      banned: 'BOOLEAN DEFAULT FALSE',\n      createdAt: 'TEXT',\n      extraData: 'TEXT',\n      id: 'TEXT',\n      lastActive: 'TEXT',\n      online: 'INTEGER',\n      role: 'TEXT',\n      updatedAt: 'TEXT',\n    },\n    indexes: [\n      {\n        columns: ['id'],\n        name: 'index_users_id',\n        unique: true,\n      },\n    ],\n    primaryKey: ['id'],\n  },\n  userSyncStatus: {\n    columns: {\n      appSettings: 'TEXT',\n      lastSyncedAt: 'TEXT',\n      userId: 'TEXT',\n    },\n    primaryKey: ['userId'],\n  },\n};\n\n// TODO: Checking the optionality of columns\nexport type Schema = {\n  channelQueries: {\n    cids: string;\n    id: string;\n  };\n  channels: {\n    cid: string;\n    extraData: string;\n    id: string;\n    type: string;\n    autoTranslationEnabled?: boolean;\n    autoTranslationLanguage?: string;\n    config?: string;\n    cooldown?: number;\n    createdAt?: string;\n    createdById?: string;\n    deletedAt?: string;\n    disabled?: boolean;\n    frozen?: boolean;\n    hidden?: boolean;\n    invites?: string;\n    lastMessageAt?: string;\n    memberCount?: number;\n    muted?: boolean;\n    ownCapabilities?: string;\n    team?: string;\n    truncatedAt?: string;\n    truncatedBy?: string;\n    truncatedById?: string;\n    updatedAt?: string;\n  };\n  members: {\n    cid: string;\n    banned?: boolean;\n    channelRole?: Role;\n    createdAt?: string;\n    inviteAcceptedAt?: string;\n    invited?: boolean;\n    inviteRejectedAt?: string;\n    isModerator?: boolean;\n    role?: string;\n    shadowBanned?: boolean;\n    updatedAt?: string;\n    userId?: string;\n  };\n  messages: {\n    attachments: string;\n    cid: string;\n    createdAt: string;\n    deletedAt: string;\n    extraData: string;\n    id: string;\n    reactionCounts: string;\n    type: MessageLabel;\n    updatedAt: string;\n    text?: string;\n    userId?: string;\n  };\n  pendingTasks: {\n    channelId: string;\n    channelType: string;\n    createdAt: string;\n    id: number;\n    messageId: string;\n    payload: string;\n    type: ValueOf<PendingTaskTypes>;\n  };\n  reactions: {\n    createdAt: string;\n    messageId: string;\n    type: string;\n    updatedAt: string;\n    extraData?: string;\n    score?: number;\n    userId?: string;\n  };\n  reads: {\n    cid: string;\n    lastRead: string;\n    unreadMessages?: number;\n    userId?: string;\n  };\n  users: {\n    id: string;\n    banned?: boolean;\n    createdAt?: string;\n    extraData?: string;\n    lastActive?: string;\n    online?: boolean;\n    role?: string;\n    updatedAt?: string;\n  };\n  userSyncStatus: {\n    appSettings: string;\n    lastSyncedAt: string;\n    userId: string;\n  };\n};\n"],"mappings":"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"}