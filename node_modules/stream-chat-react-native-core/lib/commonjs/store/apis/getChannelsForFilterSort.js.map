{"version":3,"names":["_getChannels","require","_selectChannelIdsForFilterSort","getChannelsForFilterSort","_ref","currentUserId","filters","sort","console","warn","channelIds","selectChannelIdsForFilterSort","length","getChannels","exports"],"sources":["getChannelsForFilterSort.ts"],"sourcesContent":["import type { DefaultStreamChatGenerics } from 'src/types/types';\nimport type { ChannelAPIResponse, ChannelFilters, ChannelSort } from 'stream-chat';\n\nimport { getChannels } from './getChannels';\nimport { selectChannelIdsForFilterSort } from './queries/selectChannelIdsForFilterSort';\n\n/**\n * Gets the channels from database for given filter and sort query.\n *\n * @param {Object} param\n * @param {string} param.currentUserId Id of current logged in user\n * @param {Object} param.filters Filters for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n * @param {Object} param.sort Sort for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n *\n * @returns Array of channels corresponding to filters & sort. Returns null if filters + sort query doesn't exist in \"channelQueries\" table.\n */\nexport const getChannelsForFilterSort = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  currentUserId,\n  filters,\n  sort,\n}: {\n  currentUserId: string;\n  filters?: ChannelFilters<StreamChatGenerics>;\n  sort?: ChannelSort<StreamChatGenerics>;\n}): Omit<ChannelAPIResponse<StreamChatGenerics>, 'duration'>[] | null => {\n  if (!filters && !sort) {\n    console.warn('Please provide the query (filters/sort) to fetch channels from DB');\n    return null;\n  }\n\n  const channelIds = selectChannelIdsForFilterSort({ filters, sort });\n\n  if (!channelIds) return null;\n\n  if (channelIds.length === 0) {\n    return [];\n  }\n\n  return getChannels({\n    channelIds,\n    currentUserId,\n  });\n};\n"],"mappings":";;;;AAGA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,8BAAA,GAAAD,OAAA;AAYO,IAAME,wBAAwB,GAAG,SAA3BA,wBAAwBA,CAAAC,IAAA,EAUoC;EAAA,IAPvEC,aAAa,GAAAD,IAAA,CAAbC,aAAa;IACbC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IACPC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EAMJ,IAAI,CAACD,OAAO,IAAI,CAACC,IAAI,EAAE;IACrBC,OAAO,CAACC,IAAI,CAAC,mEAAmE,CAAC;IACjF,OAAO,IAAI;EACb;EAEA,IAAMC,UAAU,GAAG,IAAAC,4DAA6B,EAAC;IAAEL,OAAO,EAAPA,OAAO;IAAEC,IAAI,EAAJA;EAAK,CAAC,CAAC;EAEnE,IAAI,CAACG,UAAU,EAAE,OAAO,IAAI;EAE5B,IAAIA,UAAU,CAACE,MAAM,KAAK,CAAC,EAAE;IAC3B,OAAO,EAAE;EACX;EAEA,OAAO,IAAAC,wBAAW,EAAC;IACjBH,UAAU,EAAVA,UAAU;IACVL,aAAa,EAAbA;EACF,CAAC,CAAC;AACJ,CAAC;AAACS,OAAA,CAAAX,wBAAA,GAAAA,wBAAA"}