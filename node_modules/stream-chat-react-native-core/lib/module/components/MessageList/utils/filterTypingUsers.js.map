{"version":3,"names":["filterTypingUsers","_ref","client","thread","typing","nonSelfUsers","user","typingKeys","Object","keys","forEach","typingKey","_client$user","_typing$typingKey$use","_typing$typingKey$use2","_typing$typingKey$use3","id","isRegularEvent","parent_id","isCurrentThreadEvent","name","push","exports"],"sources":["filterTypingUsers.ts"],"sourcesContent":["import type { ChatContextValue } from '../../../contexts/chatContext/ChatContext';\nimport type { ThreadContextValue } from '../../../contexts/threadContext/ThreadContext';\nimport type { TypingContextValue } from '../../../contexts/typingContext/TypingContext';\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\n\ntype FilterTypingUsersParams<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Pick<TypingContextValue<StreamChatGenerics>, 'typing'> &\n  Pick<ChatContextValue<StreamChatGenerics>, 'client'> &\n  Pick<ThreadContextValue<StreamChatGenerics>, 'thread'>;\n\nexport const filterTypingUsers = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  client,\n  thread,\n  typing,\n}: FilterTypingUsersParams<StreamChatGenerics>) => {\n  const nonSelfUsers: string[] = [];\n\n  if (!client || !client.user || !typing) return nonSelfUsers;\n\n  const typingKeys = Object.keys(typing);\n\n  typingKeys.forEach((typingKey) => {\n    if (!typing[typingKey]) return;\n\n    /** removes own typing events */\n    if (client.user?.id === typing[typingKey].user?.id) {\n      return;\n    }\n\n    const isRegularEvent = !typing[typingKey].parent_id && !thread?.id;\n    const isCurrentThreadEvent = typing[typingKey].parent_id === thread?.id;\n\n    /** filters different threads events */\n    if (!isRegularEvent && !isCurrentThreadEvent) {\n      return;\n    }\n\n    const user = typing[typingKey].user?.name || typing[typingKey].user?.id;\n    if (user) {\n      nonSelfUsers.push(user);\n    }\n  });\n\n  return nonSelfUsers;\n};\n"],"mappings":";;;;AAWO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAC,IAAA,EAMqB;EAAA,IAHjDC,MAAM,GAAAD,IAAA,CAANC,MAAM;IACNC,MAAM,GAAAF,IAAA,CAANE,MAAM;IACNC,MAAM,GAAAH,IAAA,CAANG,MAAM;EAEN,IAAMC,YAAsB,GAAG,EAAE;EAEjC,IAAI,CAACH,MAAM,IAAI,CAACA,MAAM,CAACI,IAAI,IAAI,CAACF,MAAM,EAAE,OAAOC,YAAY;EAE3D,IAAME,UAAU,GAAGC,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC;EAEtCG,UAAU,CAACG,OAAO,CAAC,UAACC,SAAS,EAAK;IAAA,IAAAC,YAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IAChC,IAAI,CAACX,MAAM,CAACO,SAAS,CAAC,EAAE;IAGxB,IAAI,EAAAC,YAAA,GAAAV,MAAM,CAACI,IAAI,qBAAXM,YAAA,CAAaI,EAAE,QAAAH,qBAAA,GAAKT,MAAM,CAACO,SAAS,CAAC,CAACL,IAAI,qBAAtBO,qBAAA,CAAwBG,EAAE,GAAE;MAClD;IACF;IAEA,IAAMC,cAAc,GAAG,CAACb,MAAM,CAACO,SAAS,CAAC,CAACO,SAAS,IAAI,EAACf,MAAM,YAANA,MAAM,CAAEa,EAAE;IAClE,IAAMG,oBAAoB,GAAGf,MAAM,CAACO,SAAS,CAAC,CAACO,SAAS,MAAKf,MAAM,oBAANA,MAAM,CAAEa,EAAE;IAGvE,IAAI,CAACC,cAAc,IAAI,CAACE,oBAAoB,EAAE;MAC5C;IACF;IAEA,IAAMb,IAAI,GAAG,EAAAQ,sBAAA,GAAAV,MAAM,CAACO,SAAS,CAAC,CAACL,IAAI,qBAAtBQ,sBAAA,CAAwBM,IAAI,OAAAL,sBAAA,GAAIX,MAAM,CAACO,SAAS,CAAC,CAACL,IAAI,qBAAtBS,sBAAA,CAAwBC,EAAE;IACvE,IAAIV,IAAI,EAAE;MACRD,YAAY,CAACgB,IAAI,CAACf,IAAI,CAAC;IACzB;EACF,CAAC,CAAC;EAEF,OAAOD,YAAY;AACrB,CAAC;AAACiB,OAAA,CAAAtB,iBAAA,GAAAA,iBAAA"}