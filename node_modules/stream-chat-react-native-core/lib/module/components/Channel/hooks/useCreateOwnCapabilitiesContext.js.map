{"version":3,"names":["_react","require","_OwnCapabilitiesContext","useCreateOwnCapabilitiesContext","_ref","_channel$data","_channel$data2","channel","overrideCapabilities","overrideCapabilitiesStr","JSON","stringify","Object","values","ownCapabilitiesStr","data","own_capabilities","ownCapabilitiesContext","useMemo","_channel$data3","capabilities","keys","allOwnCapabilities","reduce","result","capability","_overrideCapabilities","_extends3","_defineProperty2","includes","id","exports"],"sources":["useCreateOwnCapabilitiesContext.ts"],"sourcesContent":["import { useMemo } from 'react';\n\nimport type { Channel } from 'stream-chat';\n\nimport {\n  allOwnCapabilities,\n  OwnCapabilitiesContextValue,\n  OwnCapability,\n} from '../../../contexts/ownCapabilitiesContext/OwnCapabilitiesContext';\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\n\nexport const useCreateOwnCapabilitiesContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  channel,\n  overrideCapabilities,\n}: {\n  channel: Channel<StreamChatGenerics>;\n  overrideCapabilities?: Partial<OwnCapabilitiesContextValue>;\n}) => {\n  const overrideCapabilitiesStr = overrideCapabilities\n    ? JSON.stringify(Object.values(overrideCapabilities))\n    : null;\n  const ownCapabilitiesStr = channel?.data?.own_capabilities\n    ? JSON.stringify(Object.values(channel?.data?.own_capabilities as Array<string>))\n    : null;\n\n  const ownCapabilitiesContext: OwnCapabilitiesContextValue = useMemo(() => {\n    const capabilities = (channel?.data?.own_capabilities || []) as Array<string>;\n    const ownCapabilitiesContext = Object.keys(allOwnCapabilities).reduce(\n      (result, capability) => ({\n        ...result,\n        [capability]:\n          overrideCapabilities?.[capability as OwnCapability] ??\n          !!capabilities.includes(allOwnCapabilities[capability as OwnCapability]),\n      }),\n      {} as OwnCapabilitiesContextValue,\n    );\n\n    return ownCapabilitiesContext;\n  }, [channel.id, overrideCapabilitiesStr, ownCapabilitiesStr]);\n\n  return ownCapabilitiesContext;\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAIA,IAAAC,uBAAA,GAAAD,OAAA;AAOO,IAAME,+BAA+B,GAAG,SAAlCA,+BAA+BA,CAAAC,IAAA,EAQtC;EAAA,IAAAC,aAAA,EAAAC,cAAA;EAAA,IALJC,OAAO,GAAAH,IAAA,CAAPG,OAAO;IACPC,oBAAoB,GAAAJ,IAAA,CAApBI,oBAAoB;EAKpB,IAAMC,uBAAuB,GAAGD,oBAAoB,GAChDE,IAAI,CAACC,SAAS,CAACC,MAAM,CAACC,MAAM,CAACL,oBAAoB,CAAC,CAAC,GACnD,IAAI;EACR,IAAMM,kBAAkB,GAAGP,OAAO,aAAAF,aAAA,GAAPE,OAAO,CAAEQ,IAAI,aAAbV,aAAA,CAAeW,gBAAgB,GACtDN,IAAI,CAACC,SAAS,CAACC,MAAM,CAACC,MAAM,CAACN,OAAO,qBAAAD,cAAA,GAAPC,OAAO,CAAEQ,IAAI,qBAAbT,cAAA,CAAeU,gBAAiC,CAAC,CAAC,GAC/E,IAAI;EAER,IAAMC,sBAAmD,GAAG,IAAAC,cAAO,EAAC,YAAM;IAAA,IAAAC,cAAA;IACxE,IAAMC,YAAY,GAAI,CAAAb,OAAO,qBAAAY,cAAA,GAAPZ,OAAO,CAAEQ,IAAI,qBAAbI,cAAA,CAAeH,gBAAgB,KAAI,EAAoB;IAC7E,IAAMC,sBAAsB,GAAGL,MAAM,CAACS,IAAI,CAACC,0CAAkB,CAAC,CAACC,MAAM,CACnE,UAACC,MAAM,EAAEC,UAAU;MAAA,IAAAC,qBAAA;MAAA,WAAAC,SAAA,iBACdH,MAAM,MAAAI,gBAAA,iBACRH,UAAU,GAAAC,qBAAA,GACTlB,oBAAoB,oBAApBA,oBAAoB,CAAGiB,UAAU,CAAkB,YAAAC,qBAAA,GACnD,CAAC,CAACN,YAAY,CAACS,QAAQ,CAACP,0CAAkB,CAACG,UAAU,CAAkB,CAAC;IAAA,CAC1E,EACF,CAAC,CACH,CAAC;IAED,OAAOR,sBAAsB;EAC/B,CAAC,EAAE,CAACV,OAAO,CAACuB,EAAE,EAAErB,uBAAuB,EAAEK,kBAAkB,CAAC,CAAC;EAE7D,OAAOG,sBAAsB;AAC/B,CAAC;AAACc,OAAA,CAAA5B,+BAAA,GAAAA,+BAAA"}