{"version":3,"names":["_react","require","_ChatContext","useRemovedFromChannelNotification","_ref","onRemovedFromChannel","setChannels","_useChatContext","useChatContext","client","useEffect","handleEvent","event","channels","newChannels","filter","channel","_event$channel","cid","_toConsumableArray2","listener","on","unsubscribe","exports"],"sources":["useRemovedFromChannelNotification.ts"],"sourcesContent":["import { useEffect } from 'react';\n\nimport type { Channel, Event } from 'stream-chat';\n\nimport { useChatContext } from '../../../../contexts/chatContext/ChatContext';\n\nimport type { DefaultStreamChatGenerics } from '../../../../types/types';\n\ntype Parameters<StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics> =\n  {\n    setChannels: React.Dispatch<React.SetStateAction<Channel<StreamChatGenerics>[] | null>>;\n    onRemovedFromChannel?: (\n      setChannels: React.Dispatch<React.SetStateAction<Channel<StreamChatGenerics>[] | null>>,\n      event: Event<StreamChatGenerics>,\n    ) => void;\n  };\n\nexport const useRemovedFromChannelNotification = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  onRemovedFromChannel,\n  setChannels,\n}: Parameters<StreamChatGenerics>) => {\n  const { client } = useChatContext<StreamChatGenerics>();\n\n  useEffect(() => {\n    const handleEvent = (event: Event<StreamChatGenerics>) => {\n      if (typeof onRemovedFromChannel === 'function') {\n        onRemovedFromChannel(setChannels, event);\n      } else {\n        setChannels((channels) => {\n          if (!channels) return channels;\n\n          const newChannels = channels.filter((channel) => channel.cid !== event.channel?.cid);\n          return [...newChannels];\n        });\n      }\n    };\n\n    const listener = client?.on('notification.removed_from_channel', handleEvent);\n    return () => listener?.unsubscribe();\n  }, []);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAIA,IAAAC,YAAA,GAAAD,OAAA;AAaO,IAAME,iCAAiC,GAAG,SAApCA,iCAAiCA,CAAAC,IAAA,EAKR;EAAA,IAFpCC,oBAAoB,GAAAD,IAAA,CAApBC,oBAAoB;IACpBC,WAAW,GAAAF,IAAA,CAAXE,WAAW;EAEX,IAAAC,eAAA,GAAmB,IAAAC,2BAAc,EAAqB,CAAC;IAA/CC,MAAM,GAAAF,eAAA,CAANE,MAAM;EAEd,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAgC,EAAK;MACxD,IAAI,OAAOP,oBAAoB,KAAK,UAAU,EAAE;QAC9CA,oBAAoB,CAACC,WAAW,EAAEM,KAAK,CAAC;MAC1C,CAAC,MAAM;QACLN,WAAW,CAAC,UAACO,QAAQ,EAAK;UACxB,IAAI,CAACA,QAAQ,EAAE,OAAOA,QAAQ;UAE9B,IAAMC,WAAW,GAAGD,QAAQ,CAACE,MAAM,CAAC,UAACC,OAAO;YAAA,IAAAC,cAAA;YAAA,OAAKD,OAAO,CAACE,GAAG,OAAAD,cAAA,GAAKL,KAAK,CAACI,OAAO,qBAAbC,cAAA,CAAeC,GAAG;UAAA,EAAC;UACpF,WAAAC,mBAAA,aAAWL,WAAW;QACxB,CAAC,CAAC;MACJ;IACF,CAAC;IAED,IAAMM,QAAQ,GAAGX,MAAM,oBAANA,MAAM,CAAEY,EAAE,CAAC,mCAAmC,EAAEV,WAAW,CAAC;IAC7E,OAAO;MAAA,OAAMS,QAAQ,oBAARA,QAAQ,CAAEE,WAAW,CAAC,CAAC;IAAA;EACtC,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACC,OAAA,CAAApB,iCAAA,GAAAA,iCAAA"}