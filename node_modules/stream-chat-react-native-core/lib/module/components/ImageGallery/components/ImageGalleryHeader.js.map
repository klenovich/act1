{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_OverlayContext","_ThemeContext","_TranslationContext","_icons","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ReanimatedSafeAreaView","Animated","createAnimatedComponent","SafeAreaView","styles","StyleSheet","create","centerContainer","alignItems","flex","justifyContent","date","fontSize","fontWeight","marginTop","opacity","innerContainer","flexDirection","height","leftContainer","marginLeft","rightContainer","marginRight","width","userName","ImageGalleryHeader","props","_photo$user","_photo$user2","centerElement","CloseIcon","leftElement","photo","rightElement","visible","_useState","useState","_useState2","_slicedToArray2","setHeight","_useTheme","useTheme","_useTheme$theme","theme","_useTheme$theme$color","colors","black","white","_useTheme$theme$image","imageGallery","header","container","dateText","usernameText","_useTranslationContex","useTranslationContext","t","tDateTimeParser","_useOverlayContext","useOverlayContext","setOverlay","translucentStatusBar","parsedDate","created_at","getDateObject","isDayOrMoment","calendar","fromNow","headerStyle","useAnimatedStyle","value","transform","translateY","interpolate","Extrapolate","CLAMP","androidTranslucentHeaderStyle","paddingTop","Platform","OS","StatusBar","currentHeight","undefined","hideOverlay","createElement","View","onLayout","event","nativeEvent","layout","pointerEvents","__self","__source","fileName","lineNumber","columnNumber","style","backgroundColor","TouchableOpacity","accessibilityLabel","onPress","Close","Text","color","user","name","id","exports","displayName"],"sources":["ImageGalleryHeader.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Platform,\n  SafeAreaView,\n  StatusBar,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport Animated, { Extrapolate, interpolate, useAnimatedStyle } from 'react-native-reanimated';\n\nimport { useOverlayContext } from '../../../contexts/overlayContext/OverlayContext';\nimport { useTheme } from '../../../contexts/themeContext/ThemeContext';\nimport {\n  isDayOrMoment,\n  TDateTimeParserOutput,\n  useTranslationContext,\n} from '../../../contexts/translationContext/TranslationContext';\nimport { Close } from '../../../icons';\n\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\nimport type { Photo } from '../ImageGallery';\n\nconst ReanimatedSafeAreaView = Animated.createAnimatedComponent\n  ? Animated.createAnimatedComponent(SafeAreaView)\n  : SafeAreaView;\n\nconst styles = StyleSheet.create({\n  centerContainer: {\n    alignItems: 'center',\n    flex: 1,\n    justifyContent: 'center',\n  },\n  date: {\n    fontSize: 12,\n    fontWeight: '500',\n    marginTop: 4,\n    opacity: 0.5,\n  },\n  innerContainer: {\n    flexDirection: 'row',\n    height: 56,\n  },\n  leftContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    marginLeft: 8,\n  },\n  rightContainer: {\n    marginRight: 8,\n    width: 24, // Width of icon currently on left\n  },\n  userName: {\n    fontSize: 16,\n    fontWeight: '700',\n  },\n});\n\nexport type ImageGalleryHeaderCustomComponent<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = ({\n  hideOverlay,\n  photo,\n}: {\n  hideOverlay: () => void;\n  photo?: Photo<StreamChatGenerics>;\n}) => React.ReactElement | null;\n\nexport type ImageGalleryHeaderCustomComponentProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = {\n  centerElement?: ImageGalleryHeaderCustomComponent<StreamChatGenerics>;\n  CloseIcon?: React.ReactElement;\n  leftElement?: ImageGalleryHeaderCustomComponent<StreamChatGenerics>;\n  rightElement?: ImageGalleryHeaderCustomComponent<StreamChatGenerics>;\n};\n\ntype Props<StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics> =\n  ImageGalleryHeaderCustomComponentProps<StreamChatGenerics> & {\n    opacity: Animated.SharedValue<number>;\n    visible: Animated.SharedValue<number>;\n    photo?: Photo<StreamChatGenerics>;\n  };\n\nexport const ImageGalleryHeader = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: Props<StreamChatGenerics>,\n) => {\n  const { centerElement, CloseIcon, leftElement, opacity, photo, rightElement, visible } = props;\n  const [height, setHeight] = useState(200);\n  const {\n    theme: {\n      colors: { black, white },\n      imageGallery: {\n        header: {\n          centerContainer,\n          container,\n          dateText,\n          innerContainer,\n          leftContainer,\n          rightContainer,\n          usernameText,\n        },\n      },\n    },\n  } = useTheme();\n  const { t, tDateTimeParser } = useTranslationContext();\n  const { setOverlay, translucentStatusBar } = useOverlayContext();\n\n  const parsedDate = photo ? tDateTimeParser(photo?.created_at) : null;\n\n  /**\n   * .calendar and .fromNow can be initialized after the first render,\n   * and attempting to access them at that time will cause an error\n   * to be thrown.\n   *\n   * This falls back to null if neither exist.\n   */\n  const getDateObject = (date: TDateTimeParserOutput | null) => {\n    if (date === null || !isDayOrMoment(date)) {\n      return null;\n    }\n\n    if (date.calendar) {\n      return date.calendar();\n    }\n\n    if (date.fromNow) {\n      return date.fromNow();\n    }\n\n    return null;\n  };\n\n  const date = getDateObject(parsedDate);\n\n  const headerStyle = useAnimatedStyle<ViewStyle>(() => ({\n    opacity: opacity.value,\n    transform: [\n      {\n        translateY: interpolate(visible.value, [0, 1], [-height, 0], Extrapolate.CLAMP),\n      },\n    ],\n  }));\n\n  const androidTranslucentHeaderStyle = {\n    paddingTop:\n      Platform.OS === 'android' && translucentStatusBar ? StatusBar.currentHeight : undefined,\n  };\n\n  const hideOverlay = () => {\n    setOverlay('none');\n  };\n\n  return (\n    <View\n      onLayout={(event) => setHeight(event.nativeEvent.layout.height)}\n      pointerEvents={'box-none'}\n    >\n      <ReanimatedSafeAreaView\n        style={[{ backgroundColor: white }, androidTranslucentHeaderStyle, container, headerStyle]}\n      >\n        <View style={[styles.innerContainer, innerContainer]}>\n          {leftElement ? (\n            leftElement({ hideOverlay, photo })\n          ) : (\n            <TouchableOpacity accessibilityLabel='Hide Overlay' onPress={hideOverlay}>\n              <View style={[styles.leftContainer, leftContainer]}>\n                {CloseIcon ? CloseIcon : <Close />}\n              </View>\n            </TouchableOpacity>\n          )}\n          {centerElement ? (\n            centerElement({ hideOverlay, photo })\n          ) : (\n            <View style={[styles.centerContainer, centerContainer]}>\n              <Text style={[styles.userName, { color: black }, usernameText]}>\n                {photo?.user?.name || photo?.user?.id || t('Unknown User')}\n              </Text>\n              {date && <Text style={[styles.date, { color: black }, dateText]}>{date}</Text>}\n            </View>\n          )}\n          {rightElement ? (\n            rightElement({ hideOverlay, photo })\n          ) : (\n            <View style={[styles.rightContainer, rightContainer]} />\n          )}\n        </View>\n      </ReanimatedSafeAreaView>\n    </View>\n  );\n};\n\nImageGalleryHeader.displayName = 'ImageGalleryHeader{imageGallery{header}}';\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAUA,IAAAE,sBAAA,GAAAH,uBAAA,CAAAC,OAAA;AAEA,IAAAG,eAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AACA,IAAAK,mBAAA,GAAAL,OAAA;AAKA,IAAAM,MAAA,GAAAN,OAAA;AAAuC,IAAAO,KAAA;EAAAC,YAAA;AAAA,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAX,wBAAAe,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAE,OAAA,CAAAF,GAAA,yBAAAA,GAAA,uCAAAA,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,cAAAN,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAKvC,IAAMW,sBAAsB,GAAGC,iCAAQ,CAACC,uBAAuB,GAC3DD,iCAAQ,CAACC,uBAAuB,CAACC,yBAAY,CAAC,GAC9CA,yBAAY;AAEhB,IAAMC,MAAM,GAAGC,uBAAU,CAACC,MAAM,CAAC;EAC/BC,eAAe,EAAE;IACfC,UAAU,EAAE,QAAQ;IACpBC,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE;EAClB,CAAC;EACDC,IAAI,EAAE;IACJC,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE,KAAK;IACjBC,SAAS,EAAE,CAAC;IACZC,OAAO,EAAE;EACX,CAAC;EACDC,cAAc,EAAE;IACdC,aAAa,EAAE,KAAK;IACpBC,MAAM,EAAE;EACV,CAAC;EACDC,aAAa,EAAE;IACbV,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE,QAAQ;IACxBU,UAAU,EAAE;EACd,CAAC;EACDC,cAAc,EAAE;IACdC,WAAW,EAAE,CAAC;IACdC,KAAK,EAAE;EACT,CAAC;EACDC,QAAQ,EAAE;IACRZ,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE;EACd;AACF,CAAC,CAAC;AA4BK,IAAMY,kBAAkB,GAAG,SAArBA,kBAAkBA,CAG7BC,KAAgC,EAC7B;EAAA,IAAAC,WAAA,EAAAC,YAAA;EACH,IAAQC,aAAa,GAAoEH,KAAK,CAAtFG,aAAa;IAAEC,SAAS,GAAyDJ,KAAK,CAAvEI,SAAS;IAAEC,WAAW,GAA4CL,KAAK,CAA5DK,WAAW;IAAEhB,OAAO,GAAmCW,KAAK,CAA/CX,OAAO;IAAEiB,KAAK,GAA4BN,KAAK,CAAtCM,KAAK;IAAEC,YAAY,GAAcP,KAAK,CAA/BO,YAAY;IAAEC,OAAO,GAAKR,KAAK,CAAjBQ,OAAO;EACpF,IAAAC,SAAA,GAA4B,IAAAC,eAAQ,EAAC,GAAG,CAAC;IAAAC,UAAA,OAAAC,eAAA,aAAAH,SAAA;IAAlCjB,MAAM,GAAAmB,UAAA;IAAEE,SAAS,GAAAF,UAAA;EACxB,IAAAG,SAAA,GAeI,IAAAC,sBAAQ,EAAC,CAAC;IAAAC,eAAA,GAAAF,SAAA,CAdZG,KAAK;IAAAC,qBAAA,GAAAF,eAAA,CACHG,MAAM;IAAIC,KAAK,GAAAF,qBAAA,CAALE,KAAK;IAAEC,KAAK,GAAAH,qBAAA,CAALG,KAAK;IAAAC,qBAAA,GAAAN,eAAA,CACtBO,YAAY,CACVC,MAAM;IACJ3C,eAAe,GAAAyC,qBAAA,CAAfzC,eAAe;IACf4C,SAAS,GAAAH,qBAAA,CAATG,SAAS;IACTC,QAAQ,GAAAJ,qBAAA,CAARI,QAAQ;IACRpC,cAAc,GAAAgC,qBAAA,CAAdhC,cAAc;IACdG,aAAa,GAAA6B,qBAAA,CAAb7B,aAAa;IACbE,cAAc,GAAA2B,qBAAA,CAAd3B,cAAc;IACdgC,YAAY,GAAAL,qBAAA,CAAZK,YAAY;EAKpB,IAAAC,qBAAA,GAA+B,IAAAC,yCAAqB,EAAC,CAAC;IAA9CC,CAAC,GAAAF,qBAAA,CAADE,CAAC;IAAEC,eAAe,GAAAH,qBAAA,CAAfG,eAAe;EAC1B,IAAAC,kBAAA,GAA6C,IAAAC,iCAAiB,EAAC,CAAC;IAAxDC,UAAU,GAAAF,kBAAA,CAAVE,UAAU;IAAEC,oBAAoB,GAAAH,kBAAA,CAApBG,oBAAoB;EAExC,IAAMC,UAAU,GAAG9B,KAAK,GAAGyB,eAAe,CAACzB,KAAK,oBAALA,KAAK,CAAE+B,UAAU,CAAC,GAAG,IAAI;EASpE,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAIrD,IAAkC,EAAK;IAC5D,IAAIA,IAAI,KAAK,IAAI,IAAI,CAAC,IAAAsD,iCAAa,EAACtD,IAAI,CAAC,EAAE;MACzC,OAAO,IAAI;IACb;IAEA,IAAIA,IAAI,CAACuD,QAAQ,EAAE;MACjB,OAAOvD,IAAI,CAACuD,QAAQ,CAAC,CAAC;IACxB;IAEA,IAAIvD,IAAI,CAACwD,OAAO,EAAE;MAChB,OAAOxD,IAAI,CAACwD,OAAO,CAAC,CAAC;IACvB;IAEA,OAAO,IAAI;EACb,CAAC;EAED,IAAMxD,IAAI,GAAGqD,aAAa,CAACF,UAAU,CAAC;EAEtC,IAAMM,WAAW,GAAG,IAAAC,uCAAgB,EAAY;IAAA,OAAO;MACrDtD,OAAO,EAAEA,OAAO,CAACuD,KAAK;MACtBC,SAAS,EAAE,CACT;QACEC,UAAU,EAAE,IAAAC,kCAAW,EAACvC,OAAO,CAACoC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAACpD,MAAM,EAAE,CAAC,CAAC,EAAEwD,kCAAW,CAACC,KAAK;MAChF,CAAC;IAEL,CAAC;EAAA,CAAC,CAAC;EAEH,IAAMC,6BAA6B,GAAG;IACpCC,UAAU,EACRC,qBAAQ,CAACC,EAAE,KAAK,SAAS,IAAIlB,oBAAoB,GAAGmB,sBAAS,CAACC,aAAa,GAAGC;EAClF,CAAC;EAED,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;IACxBvB,UAAU,CAAC,MAAM,CAAC;EACpB,CAAC;EAED,OACE7F,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAmH,IAAI;IACHC,QAAQ,EAAE,SAAAA,SAACC,KAAK;MAAA,OAAKhD,SAAS,CAACgD,KAAK,CAACC,WAAW,CAACC,MAAM,CAACvE,MAAM,CAAC;IAAA,CAAC;IAChEwE,aAAa,EAAE,UAAW;IAAAC,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE1BhI,MAAA,YAAAqH,aAAA,CAACpF,sBAAsB;IACrBgG,KAAK,EAAE,CAAC;MAAEC,eAAe,EAAElD;IAAM,CAAC,EAAE6B,6BAA6B,EAAEzB,SAAS,EAAEiB,WAAW,CAAE;IAAAuB,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE3FhI,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAmH,IAAI;IAACW,KAAK,EAAE,CAAC5F,MAAM,CAACY,cAAc,EAAEA,cAAc,CAAE;IAAA2E,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAClDhE,WAAW,GACVA,WAAW,CAAC;IAAEoD,WAAW,EAAXA,WAAW;IAAEnD,KAAK,EAALA;EAAM,CAAC,CAAC,GAEnCjE,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAgI,gBAAgB;IAACC,kBAAkB,EAAC,cAAc;IAACC,OAAO,EAAEjB,WAAY;IAAAQ,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GACvEhI,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAmH,IAAI;IAACW,KAAK,EAAE,CAAC5F,MAAM,CAACe,aAAa,EAAEA,aAAa,CAAE;IAAAwE,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAChDjE,SAAS,GAAGA,SAAS,GAAG/D,MAAA,YAAAqH,aAAA,CAAC7G,MAAA,CAAA8H,KAAK;IAAAV,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC7B,CACU,CACnB,EACAlE,aAAa,GACZA,aAAa,CAAC;IAAEsD,WAAW,EAAXA,WAAW;IAAEnD,KAAK,EAALA;EAAM,CAAC,CAAC,GAErCjE,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAmH,IAAI;IAACW,KAAK,EAAE,CAAC5F,MAAM,CAACG,eAAe,EAAEA,eAAe,CAAE;IAAAoF,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrDhI,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAoI,IAAI;IAACN,KAAK,EAAE,CAAC5F,MAAM,CAACoB,QAAQ,EAAE;MAAE+E,KAAK,EAAEzD;IAAM,CAAC,EAAEO,YAAY,CAAE;IAAAsC,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC5D,CAAA/D,KAAK,qBAAAL,WAAA,GAALK,KAAK,CAAEwE,IAAI,qBAAX7E,WAAA,CAAa8E,IAAI,MAAIzE,KAAK,qBAAAJ,YAAA,GAALI,KAAK,CAAEwE,IAAI,qBAAX5E,YAAA,CAAa8E,EAAE,KAAIlD,CAAC,CAAC,cAAc,CACrD,CAAC,EACN7C,IAAI,IAAI5C,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAoI,IAAI;IAACN,KAAK,EAAE,CAAC5F,MAAM,CAACO,IAAI,EAAE;MAAE4F,KAAK,EAAEzD;IAAM,CAAC,EAAEM,QAAQ,CAAE;IAAAuC,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEpF,IAAW,CACzE,CACP,EACAsB,YAAY,GACXA,YAAY,CAAC;IAAEkD,WAAW,EAAXA,WAAW;IAAEnD,KAAK,EAALA;EAAM,CAAC,CAAC,GAEpCjE,MAAA,YAAAqH,aAAA,CAAClH,YAAA,CAAAmH,IAAI;IAACW,KAAK,EAAE,CAAC5F,MAAM,CAACiB,cAAc,EAAEA,cAAc,CAAE;IAAAsE,MAAA,EAAAnH,KAAA;IAAAoH,QAAA;MAAAC,QAAA,EAAApH,YAAA;MAAAqH,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAErD,CACgB,CACpB,CAAC;AAEX,CAAC;AAACY,OAAA,CAAAlF,kBAAA,GAAAA,kBAAA;AAEFA,kBAAkB,CAACmF,WAAW,GAAG,0CAA0C"}