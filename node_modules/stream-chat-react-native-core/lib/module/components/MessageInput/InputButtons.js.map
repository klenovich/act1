{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_MessageInputContext","_OwnCapabilitiesContext","_ThemeContext","_this","_jsxFileName","styles","StyleSheet","create","attachButtonContainer","paddingRight","InputButtonsWithContext","props","AttachButton","CommandsButton","giphyActive","hasCommands","hasFilePicker","hasImagePicker","MoreOptionsButton","openCommandsPicker","setShowMoreOptions","showMoreOptions","text","toggleAttachmentPicker","_useTheme","useTheme","_useTheme$theme$messa","theme","messageInput","commandsButtonContainer","ownCapabilities","useOwnCapabilitiesContext","createElement","handleOnPress","__self","__source","fileName","lineNumber","columnNumber","Fragment","uploadFile","View","style","undefined","exports","areEqual","prevProps","nextProps","prevGiphyActive","prevHasCommands","prevHasFilePicker","prevHasImagePicker","prevSelectedPicker","selectedPicker","prevShowMoreOptions","prevText","nextGiphyActive","nextHasCommands","nextHasFilePicker","nextHasImagePicker","nextSelectedPicker","nextShowMoreOptions","nextText","MemoizedInputButtonsWithContext","React","memo","InputButtons","_useMessageInputConte","useMessageInputContext","_extends2"],"sources":["InputButtons.tsx"],"sourcesContent":["import React from 'react';\nimport { StyleSheet, View } from 'react-native';\n\nimport {\n  MessageInputContextValue,\n  useMessageInputContext,\n} from '../../contexts/messageInputContext/MessageInputContext';\nimport { useOwnCapabilitiesContext } from '../../contexts/ownCapabilitiesContext/OwnCapabilitiesContext';\nimport { useTheme } from '../../contexts/themeContext/ThemeContext';\n\nimport type { DefaultStreamChatGenerics } from '../../types/types';\n\nconst styles = StyleSheet.create({\n  attachButtonContainer: { paddingRight: 10 },\n});\n\nexport type InputButtonsProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Partial<InputButtonsWithContextProps<StreamChatGenerics>>;\n\nexport type InputButtonsWithContextProps<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = Pick<\n  MessageInputContextValue<StreamChatGenerics>,\n  | 'AttachButton'\n  | 'CommandsButton'\n  | 'giphyActive'\n  | 'hasCommands'\n  | 'hasFilePicker'\n  | 'hasImagePicker'\n  | 'MoreOptionsButton'\n  | 'openCommandsPicker'\n  | 'selectedPicker'\n  | 'setShowMoreOptions'\n  | 'showMoreOptions'\n  | 'text'\n  | 'toggleAttachmentPicker'\n>;\n\nexport const InputButtonsWithContext = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: InputButtonsWithContextProps<StreamChatGenerics>,\n) => {\n  const {\n    AttachButton,\n    CommandsButton,\n    giphyActive,\n    hasCommands,\n    hasFilePicker,\n    hasImagePicker,\n    MoreOptionsButton,\n    openCommandsPicker,\n    setShowMoreOptions,\n    showMoreOptions,\n    text,\n    toggleAttachmentPicker,\n  } = props;\n\n  const {\n    theme: {\n      messageInput: { attachButtonContainer, commandsButtonContainer },\n    },\n  } = useTheme();\n\n  const ownCapabilities = useOwnCapabilitiesContext();\n\n  if (giphyActive) {\n    return null;\n  }\n\n  return !showMoreOptions && (hasImagePicker || hasFilePicker) && hasCommands ? (\n    <MoreOptionsButton handleOnPress={() => setShowMoreOptions(true)} />\n  ) : (\n    <>\n      {(hasImagePicker || hasFilePicker) && ownCapabilities.uploadFile && (\n        <View\n          style={[hasCommands ? styles.attachButtonContainer : undefined, attachButtonContainer]}\n        >\n          <AttachButton handleOnPress={toggleAttachmentPicker} />\n        </View>\n      )}\n      {hasCommands && !text && (\n        <View style={commandsButtonContainer}>\n          <CommandsButton handleOnPress={openCommandsPicker} />\n        </View>\n      )}\n    </>\n  );\n};\nconst areEqual = <StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics>(\n  prevProps: InputButtonsWithContextProps<StreamChatGenerics>,\n  nextProps: InputButtonsWithContextProps<StreamChatGenerics>,\n) => {\n  const {\n    giphyActive: prevGiphyActive,\n    hasCommands: prevHasCommands,\n    hasFilePicker: prevHasFilePicker,\n    hasImagePicker: prevHasImagePicker,\n    selectedPicker: prevSelectedPicker,\n    showMoreOptions: prevShowMoreOptions,\n    text: prevText,\n  } = prevProps;\n\n  const {\n    giphyActive: nextGiphyActive,\n    hasCommands: nextHasCommands,\n    hasFilePicker: nextHasFilePicker,\n    hasImagePicker: nextHasImagePicker,\n    selectedPicker: nextSelectedPicker,\n    showMoreOptions: nextShowMoreOptions,\n    text: nextText,\n  } = nextProps;\n\n  if (prevHasImagePicker !== nextHasImagePicker) {\n    return false;\n  }\n\n  if (prevHasFilePicker !== nextHasFilePicker) {\n    return false;\n  }\n\n  if (prevHasCommands !== nextHasCommands) {\n    return false;\n  }\n\n  if (prevSelectedPicker !== nextSelectedPicker) {\n    return false;\n  }\n\n  if (prevShowMoreOptions !== nextShowMoreOptions) {\n    return false;\n  }\n\n  if ((!prevProps.text && nextText) || (prevText && !nextText)) {\n    return false;\n  }\n\n  if (prevGiphyActive !== nextGiphyActive) {\n    return false;\n  }\n\n  return true;\n};\n\nconst MemoizedInputButtonsWithContext = React.memo(\n  InputButtonsWithContext,\n  areEqual,\n) as typeof InputButtonsWithContext;\n\nexport const InputButtons = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>(\n  props: InputButtonsProps<StreamChatGenerics>,\n) => {\n  const {\n    AttachButton,\n    CommandsButton,\n    giphyActive,\n    hasCommands,\n    hasFilePicker,\n    hasImagePicker,\n    MoreOptionsButton,\n    openCommandsPicker,\n    selectedPicker,\n    setShowMoreOptions,\n    showMoreOptions,\n    text,\n    toggleAttachmentPicker,\n  } = useMessageInputContext<StreamChatGenerics>();\n\n  return (\n    <MemoizedInputButtonsWithContext\n      {...{\n        AttachButton,\n        CommandsButton,\n        giphyActive,\n        hasCommands,\n        hasFilePicker,\n        hasImagePicker,\n        MoreOptionsButton,\n        openCommandsPicker,\n        selectedPicker,\n        setShowMoreOptions,\n        showMoreOptions,\n        text,\n        toggleAttachmentPicker,\n      }}\n      {...props}\n    />\n  );\n};\n"],"mappings":"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"}