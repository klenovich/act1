{"version":3,"names":["_react","require","_date","useCountdown","end","_useState","useState","_useState2","_slicedToArray2","seconds","setSeconds","useEffect","intervalId","startCountdown","setInterval","previous","next","clearInterval","ONE_SECOND_IN_MS","secondsUntilEnd","secondsUntil","exports"],"sources":["useCountdown.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { ONE_SECOND_IN_MS, secondsUntil } from '../../../utils/date';\n\n/**\n * Start a countdown to a set date, in seconds.\n * The date passed in as an argument to useCountdown\n * will be rounded up to the nearest second.\n **/\nexport const useCountdown = (end: Date) => {\n  const [seconds, setSeconds] = useState(0);\n\n  /**\n   * When a new `end` is set for the countdown, start the counter if\n   * the `end` is in the future.\n   **/\n  useEffect(() => {\n    let intervalId: NodeJS.Timer;\n\n    const startCountdown = (seconds: number) => {\n      setSeconds(seconds);\n      intervalId = setInterval(() => {\n        setSeconds((previous: number) => {\n          const next = previous - 1;\n          if (next < 1) {\n            /* Don't trigger an unnecessary rerender when done */\n            clearInterval(intervalId);\n            return 0;\n          }\n          return next;\n        });\n      }, ONE_SECOND_IN_MS);\n    };\n\n    const secondsUntilEnd = secondsUntil(end);\n    if (secondsUntilEnd > 0) {\n      startCountdown(secondsUntilEnd);\n    }\n\n    return () => {\n      if (intervalId) {\n        clearInterval(intervalId);\n      }\n    };\n  }, [end]);\n\n  return { seconds };\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,KAAA,GAAAD,OAAA;AAOO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAIC,GAAS,EAAK;EACzC,IAAAC,SAAA,GAA8B,IAAAC,eAAQ,EAAC,CAAC,CAAC;IAAAC,UAAA,OAAAC,eAAA,aAAAH,SAAA;IAAlCI,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAM1B,IAAAI,gBAAS,EAAC,YAAM;IACd,IAAIC,UAAwB;IAE5B,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIJ,OAAe,EAAK;MAC1CC,UAAU,CAACD,OAAO,CAAC;MACnBG,UAAU,GAAGE,WAAW,CAAC,YAAM;QAC7BJ,UAAU,CAAC,UAACK,QAAgB,EAAK;UAC/B,IAAMC,IAAI,GAAGD,QAAQ,GAAG,CAAC;UACzB,IAAIC,IAAI,GAAG,CAAC,EAAE;YAEZC,aAAa,CAACL,UAAU,CAAC;YACzB,OAAO,CAAC;UACV;UACA,OAAOI,IAAI;QACb,CAAC,CAAC;MACJ,CAAC,EAAEE,sBAAgB,CAAC;IACtB,CAAC;IAED,IAAMC,eAAe,GAAG,IAAAC,kBAAY,EAAChB,GAAG,CAAC;IACzC,IAAIe,eAAe,GAAG,CAAC,EAAE;MACvBN,cAAc,CAACM,eAAe,CAAC;IACjC;IAEA,OAAO,YAAM;MACX,IAAIP,UAAU,EAAE;QACdK,aAAa,CAACL,UAAU,CAAC;MAC3B;IACF,CAAC;EACH,CAAC,EAAE,CAACR,GAAG,CAAC,CAAC;EAET,OAAO;IAAEK,OAAO,EAAPA;EAAQ,CAAC;AACpB,CAAC;AAACY,OAAA,CAAAlB,YAAA,GAAAA,YAAA"}