{"version":3,"names":["messageActions","_ref","blockUser","copyMessage","deleteMessage","editMessage","error","flagMessage","isMyMessage","isThreadMessage","message","messageReactions","ownCapabilities","pinMessage","quotedReply","retry","threadReply","unpinMessage","undefined","actions","push","quoteMessage","sendReply","updateOwnMessage","updateAnyMessage","text","pinned","banChannelMembers","deleteOwnMessage","deleteAnyMessage","exports"],"sources":["messageActions.ts"],"sourcesContent":["import type { MessageContextValue } from '../../../contexts/messageContext/MessageContext';\nimport type { OwnCapabilitiesContextValue } from '../../../contexts/ownCapabilitiesContext/OwnCapabilitiesContext';\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\nimport type { MessageActionType } from '../../MessageOverlay/MessageActionListItem';\n\nexport type MessageActionsParams<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = {\n  blockUser: MessageActionType;\n  deleteMessage: MessageActionType;\n  dismissOverlay: () => void;\n  editMessage: MessageActionType;\n  error: boolean | Error;\n  flagMessage: MessageActionType;\n  isThreadMessage: boolean;\n  messageReactions: boolean;\n  muteUser: MessageActionType;\n  ownCapabilities: OwnCapabilitiesContextValue;\n  pinMessage: MessageActionType;\n  quotedReply: MessageActionType;\n  retry: MessageActionType;\n  threadReply: MessageActionType;\n  unpinMessage: MessageActionType;\n  copyMessage?: MessageActionType;\n} & Pick<MessageContextValue<StreamChatGenerics>, 'message' | 'isMyMessage'>;\n\nexport type MessageActionsProp<\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n> = (param: MessageActionsParams<StreamChatGenerics>) => MessageActionType[];\n\nexport const messageActions = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  blockUser,\n  copyMessage,\n  deleteMessage,\n  editMessage,\n  error,\n  flagMessage,\n  isMyMessage,\n  isThreadMessage,\n  message,\n  messageReactions,\n  ownCapabilities,\n  pinMessage,\n  quotedReply,\n  retry,\n  threadReply,\n  unpinMessage,\n}: MessageActionsParams<StreamChatGenerics>) => {\n  if (messageReactions) {\n    return undefined;\n  }\n\n  const actions: Array<MessageActionType> = [];\n\n  if (error && isMyMessage) {\n    actions.push(retry);\n  }\n\n  if (ownCapabilities.quoteMessage && !isThreadMessage && !error) {\n    actions.push(quotedReply);\n  }\n\n  if (ownCapabilities.sendReply && !isThreadMessage && !error) {\n    actions.push(threadReply);\n  }\n\n  if (\n    (isMyMessage && ownCapabilities.updateOwnMessage) ||\n    (!isMyMessage && ownCapabilities.updateAnyMessage)\n  ) {\n    actions.push(editMessage);\n  }\n\n  if (copyMessage !== undefined && message.text && !error) {\n    actions.push(copyMessage);\n  }\n\n  if (!isMyMessage && ownCapabilities.flagMessage) {\n    actions.push(flagMessage);\n  }\n\n  if (ownCapabilities.pinMessage && !message.pinned) {\n    actions.push(pinMessage);\n  }\n\n  if (ownCapabilities.pinMessage && message.pinned) {\n    actions.push(unpinMessage);\n  }\n\n  if (!isMyMessage && ownCapabilities.banChannelMembers) {\n    actions.push(blockUser);\n  }\n\n  if (\n    (isMyMessage && ownCapabilities.deleteOwnMessage) ||\n    (!isMyMessage && ownCapabilities.deleteAnyMessage)\n  ) {\n    actions.push(deleteMessage);\n  }\n\n  return actions;\n};\n"],"mappings":";;;;AA8BO,IAAMA,cAAc,GAAG,SAAjBA,cAAcA,CAAAC,IAAA,EAmBqB;EAAA,IAhB9CC,SAAS,GAAAD,IAAA,CAATC,SAAS;IACTC,WAAW,GAAAF,IAAA,CAAXE,WAAW;IACXC,aAAa,GAAAH,IAAA,CAAbG,aAAa;IACbC,WAAW,GAAAJ,IAAA,CAAXI,WAAW;IACXC,KAAK,GAAAL,IAAA,CAALK,KAAK;IACLC,WAAW,GAAAN,IAAA,CAAXM,WAAW;IACXC,WAAW,GAAAP,IAAA,CAAXO,WAAW;IACXC,eAAe,GAAAR,IAAA,CAAfQ,eAAe;IACfC,OAAO,GAAAT,IAAA,CAAPS,OAAO;IACPC,gBAAgB,GAAAV,IAAA,CAAhBU,gBAAgB;IAChBC,eAAe,GAAAX,IAAA,CAAfW,eAAe;IACfC,UAAU,GAAAZ,IAAA,CAAVY,UAAU;IACVC,WAAW,GAAAb,IAAA,CAAXa,WAAW;IACXC,KAAK,GAAAd,IAAA,CAALc,KAAK;IACLC,WAAW,GAAAf,IAAA,CAAXe,WAAW;IACXC,YAAY,GAAAhB,IAAA,CAAZgB,YAAY;EAEZ,IAAIN,gBAAgB,EAAE;IACpB,OAAOO,SAAS;EAClB;EAEA,IAAMC,OAAiC,GAAG,EAAE;EAE5C,IAAIb,KAAK,IAAIE,WAAW,EAAE;IACxBW,OAAO,CAACC,IAAI,CAACL,KAAK,CAAC;EACrB;EAEA,IAAIH,eAAe,CAACS,YAAY,IAAI,CAACZ,eAAe,IAAI,CAACH,KAAK,EAAE;IAC9Da,OAAO,CAACC,IAAI,CAACN,WAAW,CAAC;EAC3B;EAEA,IAAIF,eAAe,CAACU,SAAS,IAAI,CAACb,eAAe,IAAI,CAACH,KAAK,EAAE;IAC3Da,OAAO,CAACC,IAAI,CAACJ,WAAW,CAAC;EAC3B;EAEA,IACGR,WAAW,IAAII,eAAe,CAACW,gBAAgB,IAC/C,CAACf,WAAW,IAAII,eAAe,CAACY,gBAAiB,EAClD;IACAL,OAAO,CAACC,IAAI,CAACf,WAAW,CAAC;EAC3B;EAEA,IAAIF,WAAW,KAAKe,SAAS,IAAIR,OAAO,CAACe,IAAI,IAAI,CAACnB,KAAK,EAAE;IACvDa,OAAO,CAACC,IAAI,CAACjB,WAAW,CAAC;EAC3B;EAEA,IAAI,CAACK,WAAW,IAAII,eAAe,CAACL,WAAW,EAAE;IAC/CY,OAAO,CAACC,IAAI,CAACb,WAAW,CAAC;EAC3B;EAEA,IAAIK,eAAe,CAACC,UAAU,IAAI,CAACH,OAAO,CAACgB,MAAM,EAAE;IACjDP,OAAO,CAACC,IAAI,CAACP,UAAU,CAAC;EAC1B;EAEA,IAAID,eAAe,CAACC,UAAU,IAAIH,OAAO,CAACgB,MAAM,EAAE;IAChDP,OAAO,CAACC,IAAI,CAACH,YAAY,CAAC;EAC5B;EAEA,IAAI,CAACT,WAAW,IAAII,eAAe,CAACe,iBAAiB,EAAE;IACrDR,OAAO,CAACC,IAAI,CAAClB,SAAS,CAAC;EACzB;EAEA,IACGM,WAAW,IAAII,eAAe,CAACgB,gBAAgB,IAC/C,CAACpB,WAAW,IAAII,eAAe,CAACiB,gBAAiB,EAClD;IACAV,OAAO,CAACC,IAAI,CAAChB,aAAa,CAAC;EAC7B;EAEA,OAAOe,OAAO;AAChB,CAAC;AAACW,OAAA,CAAA9B,cAAA,GAAAA,cAAA"}