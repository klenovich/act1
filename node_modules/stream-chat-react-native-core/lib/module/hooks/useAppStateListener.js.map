{"version":3,"names":["_react","require","_reactNative","useAppStateListener","onForeground","onBackground","appStateRef","useRef","AppState","currentState","onForegroundRef","onBackgroundRef","current","useEffect","handleAppStateChange","nextAppState","prevAppState","match","subscription","addEventListener","remove","removeEventListener","exports"],"sources":["useAppStateListener.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { AppState, AppStateStatus } from 'react-native';\n\nexport const useAppStateListener = (onForeground?: () => void, onBackground?: () => void) => {\n  const appStateRef = useRef(AppState.currentState);\n  const onForegroundRef = useRef(onForeground);\n  const onBackgroundRef = useRef(onBackground);\n\n  // setting refs to avoid passing the functions as dependencies to useEffect\n  onForegroundRef.current = onForeground;\n  onBackgroundRef.current = onBackground;\n\n  useEffect(() => {\n    const handleAppStateChange = (nextAppState: AppStateStatus) => {\n      const prevAppState = appStateRef.current;\n      if (prevAppState.match(/inactive|background/) && nextAppState === 'active') {\n        onForegroundRef.current?.();\n      } else if (prevAppState === 'active' && nextAppState.match(/inactive|background/)) {\n        onBackgroundRef.current?.();\n      }\n      appStateRef.current = nextAppState;\n    };\n    const subscription = AppState.addEventListener('change', handleAppStateChange);\n\n    return () => {\n      // Following if-else logic is to support RN >= 0.65 and RN < 0.65 versions.\n      // https://github.com/react-native-community/releases/blob/master/CHANGELOG.md#:~:text=EventEmitter%23removeSubscription%20is%20now%20deprecated.%20(cb6cbd12f8%20by%20%40yungsters)\n      if (subscription?.remove) {\n        subscription.remove();\n      } else {\n        AppState.removeEventListener('change', handleAppStateChange);\n      }\n    };\n  }, []);\n};\n"],"mappings":";;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEO,IAAME,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,YAAyB,EAAEC,YAAyB,EAAK;EAC3F,IAAMC,WAAW,GAAG,IAAAC,aAAM,EAACC,qBAAQ,CAACC,YAAY,CAAC;EACjD,IAAMC,eAAe,GAAG,IAAAH,aAAM,EAACH,YAAY,CAAC;EAC5C,IAAMO,eAAe,GAAG,IAAAJ,aAAM,EAACF,YAAY,CAAC;EAG5CK,eAAe,CAACE,OAAO,GAAGR,YAAY;EACtCO,eAAe,CAACC,OAAO,GAAGP,YAAY;EAEtC,IAAAQ,gBAAS,EAAC,YAAM;IACd,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,YAA4B,EAAK;MAC7D,IAAMC,YAAY,GAAGV,WAAW,CAACM,OAAO;MACxC,IAAII,YAAY,CAACC,KAAK,CAAC,qBAAqB,CAAC,IAAIF,YAAY,KAAK,QAAQ,EAAE;QAC1EL,eAAe,CAACE,OAAO,oBAAvBF,eAAe,CAACE,OAAO,CAAG,CAAC;MAC7B,CAAC,MAAM,IAAII,YAAY,KAAK,QAAQ,IAAID,YAAY,CAACE,KAAK,CAAC,qBAAqB,CAAC,EAAE;QACjFN,eAAe,CAACC,OAAO,oBAAvBD,eAAe,CAACC,OAAO,CAAG,CAAC;MAC7B;MACAN,WAAW,CAACM,OAAO,GAAGG,YAAY;IACpC,CAAC;IACD,IAAMG,YAAY,GAAGV,qBAAQ,CAACW,gBAAgB,CAAC,QAAQ,EAAEL,oBAAoB,CAAC;IAE9E,OAAO,YAAM;MAGX,IAAII,YAAY,YAAZA,YAAY,CAAEE,MAAM,EAAE;QACxBF,YAAY,CAACE,MAAM,CAAC,CAAC;MACvB,CAAC,MAAM;QACLZ,qBAAQ,CAACa,mBAAmB,CAAC,QAAQ,EAAEP,oBAAoB,CAAC;MAC9D;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AAACQ,OAAA,CAAAnB,mBAAA,GAAAA,mBAAA"}