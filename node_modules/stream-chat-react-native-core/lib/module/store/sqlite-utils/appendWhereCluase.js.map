{"version":3,"names":["appendWhereClause","selectQuery","whereCondition","whereClause","whereParams","key","value","undefined","Array","isArray","questionMarks","Object","keys","length","fill","join","push","apply","_toConsumableArray2","exports"],"sources":["appendWhereCluase.ts"],"sourcesContent":["import type { Schema } from '../schema';\nimport type { PreparedQueries, TableColumnNames, TableColumnValue } from '../types';\n\nexport const appendWhereClause = <T extends keyof Schema>(\n  selectQuery: string,\n  whereCondition?: Partial<{ [k in TableColumnNames<T>]: TableColumnValue | TableColumnValue[] }>,\n): PreparedQueries => {\n  if (!whereCondition) return [selectQuery, []];\n\n  const whereClause = [];\n  const whereParams: TableColumnValue[] = [];\n\n  for (const key in whereCondition) {\n    const value = whereCondition[key];\n    if (value === undefined) continue;\n\n    if (Array.isArray(value)) {\n      const questionMarks = Array(Object.keys(value).length).fill('?').join(',');\n      whereClause.push(`${key} in (${questionMarks})`);\n      whereParams.push(...value);\n    } else {\n      whereClause.push(`${key} = ?`);\n      whereParams.push(value);\n    }\n  }\n\n  if (!whereParams.length && !whereClause.length) {\n    return [selectQuery, []];\n  }\n\n  return [`${selectQuery} WHERE ${whereClause.join(' AND ')}`, whereParams];\n};\n"],"mappings":";;;;;;AAGO,IAAMA,iBAAiB,GAAG,SAApBA,iBAAiBA,CAC5BC,WAAmB,EACnBC,cAA+F,EAC3E;EACpB,IAAI,CAACA,cAAc,EAAE,OAAO,CAACD,WAAW,EAAE,EAAE,CAAC;EAE7C,IAAME,WAAW,GAAG,EAAE;EACtB,IAAMC,WAA+B,GAAG,EAAE;EAE1C,KAAK,IAAMC,GAAG,IAAIH,cAAc,EAAE;IAChC,IAAMI,KAAK,GAAGJ,cAAc,CAACG,GAAG,CAAC;IACjC,IAAIC,KAAK,KAAKC,SAAS,EAAE;IAEzB,IAAIC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,EAAE;MACxB,IAAMI,aAAa,GAAGF,KAAK,CAACG,MAAM,CAACC,IAAI,CAACN,KAAK,CAAC,CAACO,MAAM,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;MAC1EZ,WAAW,CAACa,IAAI,CAAIX,GAAG,aAAQK,aAAa,MAAG,CAAC;MAChDN,WAAW,CAACY,IAAI,CAAAC,KAAA,CAAhBb,WAAW,MAAAc,mBAAA,aAASZ,KAAK,EAAC;IAC5B,CAAC,MAAM;MACLH,WAAW,CAACa,IAAI,CAAIX,GAAG,SAAM,CAAC;MAC9BD,WAAW,CAACY,IAAI,CAACV,KAAK,CAAC;IACzB;EACF;EAEA,IAAI,CAACF,WAAW,CAACS,MAAM,IAAI,CAACV,WAAW,CAACU,MAAM,EAAE;IAC9C,OAAO,CAACZ,WAAW,EAAE,EAAE,CAAC;EAC1B;EAEA,OAAO,CAAIA,WAAW,eAAUE,WAAW,CAACY,IAAI,CAAC,OAAO,CAAC,EAAIX,WAAW,CAAC;AAC3E,CAAC;AAACe,OAAA,CAAAnB,iBAAA,GAAAA,iBAAA"}