{"version":3,"names":["_mapTaskToStorable","require","_QuickSqliteClient","_createDeleteQuery","_createUpsertQuery","addPendingTask","task","storable","mapTaskToStorable","query","createUpsertQuery","QuickSqliteClient","executeSql","apply","channelId","channelType","payload","type","createDeleteQuery","exports"],"sources":["addPendingTask.ts"],"sourcesContent":["import { mapTaskToStorable } from '../mappers/mapTaskToStorable';\nimport { QuickSqliteClient } from '../QuickSqliteClient';\nimport { createDeleteQuery } from '../sqlite-utils/createDeleteQuery';\nimport { createUpsertQuery } from '../sqlite-utils/createUpsertQuery';\nimport type { PendingTask } from '../types';\n\nexport const addPendingTask = (task: PendingTask) => {\n  const storable = mapTaskToStorable(task);\n  const query = createUpsertQuery('pendingTasks', storable);\n\n  QuickSqliteClient.executeSql.apply(null, query);\n\n  return () => {\n    const { channelId, channelType, payload, type } = storable;\n    const query = createDeleteQuery('pendingTasks', {\n      channelId,\n      channelType,\n      payload,\n      type,\n    });\n\n    QuickSqliteClient.executeSql.apply(null, query);\n  };\n};\n"],"mappings":";;;;AAAA,IAAAA,kBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AACA,IAAAE,kBAAA,GAAAF,OAAA;AACA,IAAAG,kBAAA,GAAAH,OAAA;AAGO,IAAMI,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,IAAiB,EAAK;EACnD,IAAMC,QAAQ,GAAG,IAAAC,oCAAiB,EAACF,IAAI,CAAC;EACxC,IAAMG,KAAK,GAAG,IAAAC,oCAAiB,EAAC,cAAc,EAAEH,QAAQ,CAAC;EAEzDI,oCAAiB,CAACC,UAAU,CAACC,KAAK,CAAC,IAAI,EAAEJ,KAAK,CAAC;EAE/C,OAAO,YAAM;IACX,IAAQK,SAAS,GAAiCP,QAAQ,CAAlDO,SAAS;MAAEC,WAAW,GAAoBR,QAAQ,CAAvCQ,WAAW;MAAEC,OAAO,GAAWT,QAAQ,CAA1BS,OAAO;MAAEC,IAAI,GAAKV,QAAQ,CAAjBU,IAAI;IAC7C,IAAMR,KAAK,GAAG,IAAAS,oCAAiB,EAAC,cAAc,EAAE;MAC9CJ,SAAS,EAATA,SAAS;MACTC,WAAW,EAAXA,WAAW;MACXC,OAAO,EAAPA,OAAO;MACPC,IAAI,EAAJA;IACF,CAAC,CAAC;IAEFN,oCAAiB,CAACC,UAAU,CAACC,KAAK,CAAC,IAAI,EAAEJ,KAAK,CAAC;EACjD,CAAC;AACH,CAAC;AAACU,OAAA,CAAAd,cAAA,GAAAA,cAAA"}