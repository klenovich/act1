{"version":3,"names":["_QuickSqliteClient","require","_createSelectQuery","_convertFilterSortToQuery","selectChannelIdsForFilterSort","_ref","_results$","filters","sort","query","convertFilterSortToQuery","results","QuickSqliteClient","executeSql","apply","createSelectQuery","id","channelIdsStr","cids","JSON","parse","exports"],"sources":["selectChannelIdsForFilterSort.ts"],"sourcesContent":["import type { ChannelFilters, ChannelSort } from 'stream-chat';\n\nimport type { DefaultStreamChatGenerics } from '../../../types/types';\nimport { QuickSqliteClient } from '../../QuickSqliteClient';\nimport { createSelectQuery } from '../../sqlite-utils/createSelectQuery';\n\nimport { convertFilterSortToQuery } from '../utils/convertFilterSortToQuery';\n\n/**\n * Gets the channel ids from database for given filter and sort query.\n *\n * @param {Object} param\n * @param {Object} param.filters Filters for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n * @param {Object} param.sort Sort for channels https://getstream.io/chat/docs/javascript/query_channels/?language=javascript&q=su#query-parameters\n *\n * @returns Array of channel ids corresponding to filters & sort. Returns null if filters + sort query doesn't exist in \"channelQueries\" table.\n */\n\nexport const selectChannelIdsForFilterSort = <\n  StreamChatGenerics extends DefaultStreamChatGenerics = DefaultStreamChatGenerics,\n>({\n  filters,\n  sort,\n}: {\n  filters?: ChannelFilters<StreamChatGenerics>;\n  sort?: ChannelSort<StreamChatGenerics>;\n}): string[] | null => {\n  const query = convertFilterSortToQuery({ filters, sort });\n  const results = QuickSqliteClient.executeSql.apply(\n    null,\n    createSelectQuery('channelQueries', ['*'], {\n      id: query,\n    }),\n  );\n\n  const channelIdsStr = results?.[0]?.cids;\n  return channelIdsStr ? JSON.parse(channelIdsStr) : null;\n};\n"],"mappings":";;;;AAGA,IAAAA,kBAAA,GAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAD,OAAA;AAEA,IAAAE,yBAAA,GAAAF,OAAA;AAYO,IAAMG,6BAA6B,GAAG,SAAhCA,6BAA6BA,CAAAC,IAAA,EAQnB;EAAA,IAAAC,SAAA;EAAA,IALrBC,OAAO,GAAAF,IAAA,CAAPE,OAAO;IACPC,IAAI,GAAAH,IAAA,CAAJG,IAAI;EAKJ,IAAMC,KAAK,GAAG,IAAAC,kDAAwB,EAAC;IAAEH,OAAO,EAAPA,OAAO;IAAEC,IAAI,EAAJA;EAAK,CAAC,CAAC;EACzD,IAAMG,OAAO,GAAGC,oCAAiB,CAACC,UAAU,CAACC,KAAK,CAChD,IAAI,EACJ,IAAAC,oCAAiB,EAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,EAAE;IACzCC,EAAE,EAAEP;EACN,CAAC,CACH,CAAC;EAED,IAAMQ,aAAa,GAAGN,OAAO,qBAAAL,SAAA,GAAPK,OAAO,CAAG,CAAC,CAAC,qBAAZL,SAAA,CAAcY,IAAI;EACxC,OAAOD,aAAa,GAAGE,IAAI,CAACC,KAAK,CAACH,aAAa,CAAC,GAAG,IAAI;AACzD,CAAC;AAACI,OAAA,CAAAjB,6BAAA,GAAAA,6BAAA"}